import{h as Me,r as E,c as M,o as ne,a as ee,d as Y,b as l,e as r,n as B,f as e,g as $,i as N,j as X,t as n,k as me,l as ve,w as qe,m as Ue,p as D,q as W,u as d,s as ue,F as te,v as ae,x as Be}from"./vendor-bZ2E60ID.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))u(k);new MutationObserver(k=>{for(const _ of k)if(_.type==="childList")for(const c of _.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function a(k){const _={};return k.integrity&&(_.integrity=k.integrity),k.referrerPolicy&&(_.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?_.credentials="include":k.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function u(k){if(k.ep)return;k.ep=!0;const _=a(k);fetch(k.href,_)}})();/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),He=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,u)=>u?u.toUpperCase():a.toLowerCase()),ze=s=>{const t=He(s);return t.charAt(0).toUpperCase()+t.slice(1)},Ve=(...s)=>s.filter((t,a,u)=>!!t&&t.trim()!==""&&u.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=({size:s,strokeWidth:t=2,absoluteStrokeWidth:a,color:u,iconNode:k,name:_,class:c,...x},{slots:S})=>Me("svg",{...ye,width:s||ye.width,height:s||ye.height,stroke:u||ye.stroke,"stroke-width":a?Number(t)*24/Number(s):t,class:Ve("lucide",..._?[`lucide-${Te(ze(_))}-icon`,`lucide-${Te(_)}`]:["lucide-icon"]),...x},[...k.map(C=>Me(...C)),...S.default?[S.default()]:[]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=(s,t)=>(a,{slots:u})=>Me(je,{...a,iconNode:t,name:s},u);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=z("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=z("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=z("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=z("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=z("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=z("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=z("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=z("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=z("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=z("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=z("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=z("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=z("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=z("memory-stick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=z("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=z("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=z("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=z("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=z("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=z("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=z("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=z("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=z("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=z("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=z("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);class Ke{constructor(t){this.baseUrl="http://192.168.0.99:9090",this.cache=new Map,this.requestAbortControllers=new Map,t&&(this.baseUrl=t)}async query(t,a=!0){const u=`query:${t}`;if(a){const c=this.cache.get(u);if(c&&Date.now()-c.timestamp<3e4)return c.data}const k=this.requestAbortControllers.get(u);k&&k.abort();const _=new AbortController;this.requestAbortControllers.set(u,_);try{const c=`${this.baseUrl}/api/v1/query?query=${encodeURIComponent(t)}`,x=await fetch(c,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:_.signal});if(!x.ok)throw new Error(`Prometheus API error: ${x.status} ${x.statusText}`);const S=await x.json();return S.status==="success"&&this.cache.set(u,{data:S,timestamp:Date.now()}),S}catch(c){throw c.name==="AbortError"?new Error("Request cancelled"):(console.error("Prometheus query failed:",t,c),new Error(`Failed to fetch metrics: ${c.message}`))}finally{this.requestAbortControllers.delete(u)}}async queryRange(t,a,u,k){const _=new URLSearchParams({query:t,start:a.toString(),end:u.toString(),step:k.toString()}),c=new AbortController,x=setTimeout(()=>c.abort(),1e4);try{const S=`${this.baseUrl}/api/v1/query_range?${_}`,C=await fetch(S,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:c.signal});if(clearTimeout(x),!C.ok)throw new Error(`Prometheus range query error: ${C.status} ${C.statusText}`);return await C.json()}catch(S){throw clearTimeout(x),console.error("Prometheus range query failed:",t,S),new Error(`Failed to fetch metrics range: ${S.message}`)}}async getTargets(){const t=new AbortController,a=setTimeout(()=>t.abort(),5e3);try{const u=await fetch(`${this.baseUrl}/api/v1/targets`,{method:"GET",headers:{Accept:"application/json"},signal:t.signal});if(clearTimeout(a),!u.ok)throw new Error(`Failed to fetch targets: ${u.status}`);return await u.json()}catch(u){throw clearTimeout(a),new Error(`Failed to fetch Prometheus targets: ${u.message}`)}}async isHealthy(){try{return(await fetch(`${this.baseUrl}/-/healthy`,{method:"GET",signal:AbortSignal.timeout(3e3)})).ok}catch{return!1}}clearCache(t){t?this.cache.delete(`query:${t}`):this.cache.clear()}cancelAllRequests(){this.requestAbortControllers.forEach(t=>t.abort()),this.requestAbortControllers.clear()}}const q=new Ke,H={cpuUsage:'100 - (avg(rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)',cpuCores:"count(count(node_cpu_seconds_total) by (cpu))",loadAverage1m:"node_load1",loadAverage5m:"node_load5",loadAverage15m:"node_load15",memoryTotal:"node_memory_MemTotal_bytes",memoryAvailable:"node_memory_MemAvailable_bytes",memoryUsagePercent:"100 * (1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)",memoryUsageBytes:"node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes",diskUsagePercent:"100 - (node_filesystem_avail_bytes / node_filesystem_size_bytes * 100)",diskTotal:'node_filesystem_size_bytes{fstype!="tmpfs",mountpoint="/"}',diskUsed:'node_filesystem_size_bytes{fstype!="tmpfs",mountpoint="/"} - node_filesystem_free_bytes{fstype!="tmpfs",mountpoint="/"}',diskAvailable:'node_filesystem_avail_bytes{fstype!="tmpfs",mountpoint="/"}',networkReceiveBytesRate:'rate(node_network_receive_bytes_total{device!="lo"}[5m])',networkTransmitBytesRate:'rate(node_network_transmit_bytes_total{device!="lo"}[5m])',networkReceiveTotal:'sum(node_network_receive_bytes_total{device!="lo"})',networkTransmitTotal:'sum(node_network_transmit_bytes_total{device!="lo"})',uptime:"node_time_seconds - node_boot_time_seconds",serviceHealth:"up",prometheusTargets:"prometheus_target_health",zfsPoolHealth:"zfs_pool_health",zfsPoolUsagePercent:"zfs_pool_used_bytes / zfs_pool_size_bytes * 100",zfsPoolAvailableBytes:"zfs_pool_available_bytes",containerCount:'count(container_last_seen{name!=""})',containerCpuUsage:'sum(rate(container_cpu_usage_seconds_total{name!=""}[5m])) by (name)',containerMemoryUsage:'sum(container_memory_usage_bytes{name!=""}) by (name)',delugeActiveDownloads:"deluge_active_downloads",delugeDownloadSpeed:"deluge_download_speed_bytes",delugeUploadSpeed:"deluge_upload_speed_bytes"},K={extractValue(s){var a,u;if(!s||s.length===0)return 0;const t=(u=(a=s[0])==null?void 0:a.value)==null?void 0:u[1];return t?parseFloat(t):0},extractValues(s){return s.map(t=>({label:Object.values(t.metric).join(" "),value:t.value?parseFloat(t.value[1]):0}))},formatBytes(s){if(s===0)return"0 B";const t=1024,a=["B","KB","MB","GB","TB"],u=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,u)).toFixed(2))+" "+a[u]},formatPercent(s){return`${Math.round(s*100)/100}%`},formatUptime(s){const t=Math.floor(s/86400),a=Math.floor(s%86400/3600),u=Math.floor(s%3600/60);return t>0?`${t}d ${a}h ${u}m`:a>0?`${a}h ${u}m`:`${u}m`}},Re=()=>{const s=E({cpuUsage:0,cpuCores:0,memoryUsage:0,memoryTotal:0,memoryUsed:0,diskUsage:0,diskTotal:0,diskUsed:0,diskAvailable:0,loadAverage1m:0,loadAverage5m:0,loadAverage15m:0,networkReceiveRate:0,networkTransmitRate:0,uptime:0,lastUpdate:null}),t=E([]),a=E(!1),u=E(""),k=E(!1);let _=null,c=null;const x=M(()=>{if(u.value)return"error";if(a.value)return"loading";if(!s.value.lastUpdate)return"no-data";const i=Date.now(),h=s.value.lastUpdate.getTime();return i-h>12e4?"stale":"healthy"}),S=M(()=>{const{loadAverage1m:i,cpuCores:h}=s.value;if(h===0)return"unknown";const g=i/h;return g>1.5?"critical":g>1?"warning":"normal"}),C=M(()=>{const i=s.value.memoryUsage;return i>90?"critical":i>75?"warning":"normal"}),A=M(()=>{const i=s.value.diskUsage;return i>90?"critical":i>80?"warning":"normal"}),m=async()=>{try{a.value=!0,u.value="";const i=[q.query(H.cpuUsage),q.query(H.cpuCores),q.query(H.memoryUsagePercent),q.query(H.memoryTotal),q.query(H.memoryUsageBytes),q.query(H.diskUsagePercent),q.query(H.diskTotal),q.query(H.diskUsed),q.query(H.diskAvailable),q.query(H.loadAverage1m),q.query(H.loadAverage5m),q.query(H.loadAverage15m),q.query(H.networkReceiveBytesRate),q.query(H.networkTransmitBytesRate),q.query(H.uptime)];(await Promise.allSettled(i)).forEach((g,f)=>{if(g.status==="fulfilled"&&g.value.status==="success"){const w=K.extractValue(g.value.data.result);switch(f){case 0:s.value.cpuUsage=w;break;case 1:s.value.cpuCores=w;break;case 2:s.value.memoryUsage=w;break;case 3:s.value.memoryTotal=w;break;case 4:s.value.memoryUsed=w;break;case 5:s.value.diskUsage=w;break;case 6:s.value.diskTotal=w;break;case 7:s.value.diskUsed=w;break;case 8:s.value.diskAvailable=w;break;case 9:s.value.loadAverage1m=w;break;case 10:s.value.loadAverage5m=w;break;case 11:s.value.loadAverage15m=w;break;case 12:s.value.networkReceiveRate=w;break;case 13:s.value.networkTransmitRate=w;break;case 14:s.value.uptime=w;break}}}),s.value.lastUpdate=new Date,o()}catch(i){console.error("Failed to fetch system metrics:",i),u.value=i instanceof Error?i.message:"Unknown error occurred"}finally{a.value=!1}},o=()=>{const i={timestamp:Date.now(),cpuUsage:s.value.cpuUsage,memoryUsage:s.value.memoryUsage,diskUsage:s.value.diskUsage,loadAverage:s.value.loadAverage1m};t.value.push(i),t.value.length>120&&(t.value=t.value.slice(-120))},b=async()=>{try{const i=Math.floor(Date.now()/1e3),h=i-3600,g=300,f=[q.queryRange(H.cpuUsage,h,i,g),q.queryRange(H.memoryUsagePercent,h,i,g),q.queryRange(H.diskUsagePercent,h,i,g),q.queryRange(H.loadAverage1m,h,i,g)],w=await Promise.allSettled(f),V=new Map;w.forEach((U,j)=>{if(U.status==="fulfilled"&&U.value.status==="success"){const O=U.value.data.result[0];O!=null&&O.values&&O.values.forEach(([se,P])=>{const I=se*1e3;V.has(I)||V.set(I,{timestamp:I});const J=V.get(I);switch(j){case 0:J.cpuUsage=parseFloat(P);break;case 1:J.memoryUsage=parseFloat(P);break;case 2:J.diskUsage=parseFloat(P);break;case 3:J.loadAverage=parseFloat(P);break}})}});const p=Array.from(V.values()).filter(U=>U.timestamp!==void 0&&U.cpuUsage!==void 0&&U.memoryUsage!==void 0&&U.diskUsage!==void 0&&U.loadAverage!==void 0).map(U=>U).sort((U,j)=>U.timestamp-j.timestamp);t.value=p}catch(i){console.error("Failed to fetch historical metrics:",i)}},T=async()=>{k.value||(k.value=!0,await m(),await b(),_=setInterval(m,3e4),c=setInterval(b,3e5))},R=()=>{k.value=!1,_&&(clearInterval(_),_=null),c&&(clearInterval(c),c=null)},y=async()=>{await m()},v=M(()=>({cpuUsage:K.formatPercent(s.value.cpuUsage),memoryUsage:K.formatPercent(s.value.memoryUsage),memoryTotal:K.formatBytes(s.value.memoryTotal),memoryUsed:K.formatBytes(s.value.memoryUsed),diskUsage:K.formatPercent(s.value.diskUsage),diskTotal:K.formatBytes(s.value.diskTotal),diskUsed:K.formatBytes(s.value.diskUsed),diskAvailable:K.formatBytes(s.value.diskAvailable),networkReceiveRate:K.formatBytes(s.value.networkReceiveRate)+"/s",networkTransmitRate:K.formatBytes(s.value.networkTransmitRate)+"/s",uptime:K.formatUptime(s.value.uptime),loadAverage:`${s.value.loadAverage1m.toFixed(2)}`}));return ne(()=>{R()}),{systemMetrics:ee(s),historicalData:ee(t),isLoading:ee(a),error:ee(u),isMonitoring:ee(k),healthStatus:x,loadStatus:S,memoryStatus:C,diskStatus:A,formattedMetrics:v,startMonitoring:T,stopMonitoring:R,refreshMetrics:y,fetchCurrentMetrics:m,fetchHistoricalMetrics:b}},Ze={class:"metric-header"},Xe={class:"metric-title"},Ye={class:"metric-value"},Qe={key:0,class:"metric-subtitle"},Je={key:1,class:"metric-details"},et={class:"text-xs opacity-60"},tt={class:"metric-status-bar"},st=Y({__name:"MetricCard",props:{title:{},value:{},rawValue:{},status:{},icon:{},subtitle:{},cores:{},maxValue:{default:100}},setup(s){const t=s,a={Cpu:Ce,MemoryStick:ke,HardDrive:de,Activity:Z,Zap:be,Network:Ge,Database:re},u=M(()=>a[t.icon]||be),k=M(()=>({"metric-normal":t.status==="normal","metric-warning":t.status==="warning","metric-critical":t.status==="critical"})),_=M(()=>{const c=Math.min(t.rawValue/t.maxValue*100,100);let x="#00ff00";return t.status==="warning"&&(x="#ffa500"),t.status==="critical"&&(x="#ff0000"),{width:`${c}%`,backgroundColor:x,transition:"all 0.3s ease"}});return(c,x)=>(r(),l("div",{class:B(["metric-card",k.value])},[e("div",Ze,[(r(),N(X(u.value),{class:"metric-icon w-4 h-4"})),e("span",Xe,n(c.title),1)]),e("div",Ye,n(c.value),1),c.subtitle?(r(),l("div",Qe,n(c.subtitle),1)):$("",!0),c.cores?(r(),l("div",Je,[e("span",et,n(c.cores)+" cores available",1)])):$("",!0),e("div",tt,[e("div",{class:"status-fill",style:me(_.value)},null,4)])],2))}}),Q=(s,t)=>{const a=s.__vccOpts||s;for(const[u,k]of t)a[u]=k;return a},fe=Q(st,[["__scopeId","data-v-911c16b3"]]),at={key:0,class:"chart-header"},ot={class:"chart-title"},rt={class:"chart-timespan"},it=["width","height"],nt={key:1,class:"chart-overlay"},lt={key:2,class:"chart-overlay"},ct={style:{color:"rgba(255, 100, 100, 1)"},class:"text-sm"},ut={key:3,class:"chart-overlay"},dt={class:"tooltip-time"},mt={class:"tooltip-value"},ht=Y({__name:"MiniChart",props:{data:{},type:{default:"area"},height:{default:120},color:{},title:{},showHeader:{type:Boolean,default:!1},timeSpan:{default:"hour"}},setup(s){const t=s,a=E(),u=E(400),k=E(t.height),_=E(!1),c=E(""),x=E({visible:!1,x:0,y:0,time:"",value:""});let S=null;const C=M(()=>t.showHeader?t.height-30:t.height),A=y=>y>1e6?`${(y/1e6).toFixed(1)}M`:y>1e3?`${(y/1e3).toFixed(1)}K`:y.toFixed(1),m=y=>new Date(y).toLocaleTimeString(),o=()=>{if(!a.value||!t.data||t.data.length===0)return;const y=a.value.getContext("2d");if(!y)return;y.clearRect(0,0,u.value,k.value);const v=t.color||getComputedStyle(document.documentElement).getPropertyValue("--primary-color").trim(),i=getComputedStyle(document.documentElement).getPropertyValue("--section-bg").trim(),h=20,g=t.showHeader?30:0,f=u.value-h*2,w=C.value-h*2,V=h+g,p=[...t.data].sort((P,I)=>P.timestamp-I.timestamp),U=p.map(P=>P.value),j=Math.min(...U),O=Math.max(...U),se=O-j||1;y.fillStyle=i,y.fillRect(0,0,u.value,k.value),y.strokeStyle=v+"20",y.lineWidth=1;for(let P=0;P<=4;P++){const I=V+P/4*w;y.beginPath(),y.moveTo(h,I),y.lineTo(u.value-h,I),y.stroke()}for(let P=0;P<=6;P++){const I=h+P/6*f;y.beginPath(),y.moveTo(I,V),y.lineTo(I,V+w),y.stroke()}if(p.length!==0){if(y.strokeStyle=v,y.lineWidth=2,t.type==="area"){const P=y.createLinearGradient(0,V,0,V+w);P.addColorStop(0,v+"40"),P.addColorStop(1,v+"10"),y.fillStyle=P}if(y.beginPath(),p.forEach((P,I)=>{const J=h+I/(p.length-1)*f,ce=V+(O-P.value)/se*w;I===0?y.moveTo(J,ce):y.lineTo(J,ce)}),y.stroke(),t.type==="area"){const P=h+f,I=V+w;y.lineTo(P,I),y.lineTo(h,I),y.closePath(),y.fill()}y.fillStyle=v,p.forEach((P,I)=>{const J=h+I/(p.length-1)*f,ce=V+(O-P.value)/se*w;y.beginPath(),y.arc(J,ce,2,0,2*Math.PI),y.fill()}),y.fillStyle=v+"80",y.font="10px system-ui",y.textAlign="right",y.fillText(A(O),u.value-h-5,V+12),y.fillText(A(j),u.value-h-5,V+w-5)}},b=()=>{var v;if(!a.value)return;const y=(v=a.value.parentElement)==null?void 0:v.getBoundingClientRect();y&&(u.value=y.width,k.value=C.value,Ue(()=>{o()}))},T=y=>{if(!a.value||!t.data||t.data.length===0)return;const v=a.value.getBoundingClientRect(),i=y.clientX-v.left,h=y.clientY-v.top,g=20,f=t.showHeader?30:0,w=u.value-g*2,V=g+f;if(i>=g&&i<=u.value-g&&h>=V){const p=Math.round((i-g)/w*(t.data.length-1)),U=t.data[p];U&&(x.value={visible:!0,x:i+10,y:h-40,time:m(U.timestamp),value:A(U.value)})}},R=()=>{x.value.visible=!1};return ve(()=>{a.value&&(S=new ResizeObserver(b),S.observe(a.value.parentElement),b())}),ne(()=>{S&&S.disconnect()}),qe([()=>t.data,()=>t.color],()=>{Ue(()=>{o()})},{deep:!0}),(y,v)=>(r(),l("div",{class:"mini-chart",style:me({height:y.height+"px"})},[y.showHeader?(r(),l("div",at,[e("span",ot,n(y.title||"System Metrics"),1),e("span",rt,"Last "+n(y.timeSpan),1)])):$("",!0),e("canvas",{ref_key:"chartCanvas",ref:a,width:u.value,height:k.value,class:"chart-canvas",onMousemove:T,onMouseleave:R},null,40,it),_.value?(r(),l("div",nt,[...v[0]||(v[0]=[e("div",{class:"animate-pulse",style:{color:"var(--text-muted)"}},"Loading chart data...",-1)])])):$("",!0),c.value?(r(),l("div",lt,[e("div",ct,n(c.value),1)])):$("",!0),!y.data||y.data.length===0?(r(),l("div",ut,[...v[1]||(v[1]=[e("div",{style:{color:"var(--text-muted)"},class:"text-sm"},"No data available",-1)])])):$("",!0),x.value.visible?(r(),l("div",{key:4,class:"chart-tooltip",style:me({left:x.value.x+"px",top:x.value.y+"px"})},[e("div",dt,n(x.value.time),1),e("div",mt,n(x.value.value),1)],4)):$("",!0)],4))}}),Ee=Q(ht,[["__scopeId","data-v-730736d4"]]),vt={class:"mario-card system-metrics-widget"},pt={class:"widget-header"},gt={class:"text-lg font-semibold flex items-center gap-2",style:{color:"var(--text-color)"}},yt={class:"flex items-center space-x-2"},ft={class:"text-xs opacity-70",style:{color:"var(--text-color)"}},kt={class:"metrics-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4"},bt={class:"network-metrics mt-4 p-4 rounded-lg",style:{background:"var(--section-bg)"}},wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_t={class:"flex items-center justify-between"},$t={class:"text-sm font-medium",style:{color:"var(--primary-color)"}},Mt={class:"flex items-center justify-between"},xt={class:"text-sm font-medium",style:{color:"var(--primary-color)"}},Ct={class:"system-info mt-4 p-4 rounded-lg",style:{background:"var(--section-bg)"}},St={class:"flex items-center justify-between"},Ut={class:"text-sm font-medium",style:{color:"var(--primary-color)"}},Tt={key:0,class:"metrics-chart mt-4"},At={class:"widget-actions mt-4 flex items-center justify-between"},Dt={class:"flex items-center space-x-2"},Pt=["disabled"],Rt={key:0,class:"text-xs opacity-50",style:{color:"var(--text-color)"}},Et=Y({__name:"SystemMetricsWidget",setup(s){const t=E(!0),{systemMetrics:a,historicalData:u,isLoading:k,error:_,healthStatus:c,loadStatus:x,memoryStatus:S,diskStatus:C,formattedMetrics:A,startMonitoring:m,stopMonitoring:o,refreshMetrics:b}=Re(),T=M(()=>({"status-healthy":c.value==="healthy","status-loading":c.value==="loading","status-error":c.value==="error","status-stale":c.value==="stale","status-no-data":c.value==="no-data"})),R=M(()=>{switch(c.value){case"healthy":return"âœ…";case"loading":return"ðŸ”„";case"error":return"âŒ";case"stale":return"âš ï¸";case"no-data":return"â“";default:return"â“"}}),y=M(()=>{if(!a.value.lastUpdate)return"Never";const f=Date.now()-a.value.lastUpdate.getTime();return f<6e4?`${Math.floor(f/1e3)}s ago`:f<36e5?`${Math.floor(f/6e4)}m ago`:`${Math.floor(f/36e5)}h ago`}),v=M(()=>{const f=a.value.cpuUsage;return f>90?"critical":f>75?"warning":"normal"}),i=M(()=>u.value.map(f=>({timestamp:f.timestamp,value:f.cpuUsage}))),h=M(()=>getComputedStyle(document.documentElement).getPropertyValue("--primary-color").trim()),g=()=>{t.value=!t.value};return ve(()=>{m()}),ne(()=>{o()}),(f,w)=>(r(),l("div",vt,[e("div",pt,[e("h3",gt,[D(d(oe),{class:"w-5 h-5"}),w[1]||(w[1]=W(" System Metrics ",-1))]),e("div",yt,[e("div",{class:B(["status-indicator",T.value])},n(R.value),3),e("span",ft,n(y.value),1)])]),e("div",kt,[D(fe,{title:"CPU Usage",value:d(A).cpuUsage,"raw-value":d(a).cpuUsage,status:v.value,icon:"Cpu",cores:d(a).cpuCores},null,8,["value","raw-value","status","cores"]),D(fe,{title:"Memory Usage",value:d(A).memoryUsage,"raw-value":d(a).memoryUsage,status:d(S),icon:"MemoryStick",subtitle:`${d(A).memoryUsed} / ${d(A).memoryTotal}`},null,8,["value","raw-value","status","subtitle"]),D(fe,{title:"Storage Usage",value:d(A).diskUsage,"raw-value":d(a).diskUsage,status:d(C),icon:"HardDrive",subtitle:`${d(A).diskUsed} / ${d(A).diskTotal}`},null,8,["value","raw-value","status","subtitle"]),D(fe,{title:"Load Average",value:d(A).loadAverage,"raw-value":d(a).loadAverage1m,status:d(x),icon:"Activity",subtitle:`${d(a).cpuCores} cores`},null,8,["value","raw-value","status","subtitle"])]),e("div",bt,[w[4]||(w[4]=e("h4",{class:"text-sm font-medium mb-2 opacity-80",style:{color:"var(--text-color)"}},"Network Activity",-1)),e("div",wt,[e("div",_t,[w[2]||(w[2]=e("span",{class:"text-sm opacity-70",style:{color:"var(--text-color)"}},"â†“ Download:",-1)),e("span",$t,n(d(A).networkReceiveRate),1)]),e("div",Mt,[w[3]||(w[3]=e("span",{class:"text-sm opacity-70",style:{color:"var(--text-color)"}},"â†‘ Upload:",-1)),e("span",xt,n(d(A).networkTransmitRate),1)])])]),e("div",Ct,[e("div",St,[w[5]||(w[5]=e("span",{class:"text-sm opacity-70",style:{color:"var(--text-color)"}},"System Uptime:",-1)),e("span",Ut,n(d(A).uptime),1)])]),t.value&&d(u).length>0?(r(),l("div",Tt,[D(Ee,{data:i.value,type:"area",height:"120",color:h.value},null,8,["data","color"])])):$("",!0),e("div",At,[e("div",Dt,[e("button",{onClick:w[0]||(w[0]=(...V)=>d(b)&&d(b)(...V)),disabled:d(k),class:"mario-button-small flex items-center gap-1"},[D(d(le),{class:B(["w-3 h-3",{"animate-spin":d(k)}])},null,8,["class"]),w[6]||(w[6]=W(" Refresh ",-1))],8,Pt),e("button",{onClick:g,class:"mario-button-small flex items-center gap-1"},[D(d(ge),{class:"w-3 h-3"}),W(" "+n(t.value?"Hide":"Show")+" Chart ",1)])]),d(_)?(r(),l("div",Rt," âš ï¸ "+n(d(_)),1)):$("",!0)])]))}}),It=Q(Et,[["__scopeId","data-v-4ad0f620"]]),Ie=()=>{const s=E([{id:"prometheus",name:"Prometheus",description:"Metrics Collection System",status:"unknown",lastChecked:null,responseTime:null,job:"prometheus",instance:"localhost:9090",url:"http://192.168.0.99:9090"},{id:"node-exporter",name:"Node Exporter",description:"System Metrics Exporter",status:"unknown",lastChecked:null,responseTime:null,job:"node-exporter",instance:"proxmox-host"},{id:"cadvisor",name:"cAdvisor",description:"Container Metrics",status:"unknown",lastChecked:null,responseTime:null,job:"cadvisor",instance:"container-metrics"},{id:"zfs-exporter",name:"ZFS Exporter",description:"Storage Pool Metrics",status:"unknown",lastChecked:null,responseTime:null,job:"zfs-exporter",instance:"zfs-pools"},{id:"deluge-exporter",name:"Deluge Exporter",description:"Torrent Client Metrics",status:"unknown",lastChecked:null,responseTime:null,job:"deluge-exporter",instance:"torrent-client"},{id:"plex",name:"Plex Media Server",description:"Media Streaming Platform",status:"unknown",lastChecked:null,responseTime:null,job:"plex-server",instance:"media-server",url:"http://192.168.0.99:32400",healthEndpoint:"http://192.168.0.99:32400/identity"},{id:"grafana",name:"Grafana Dashboard",description:"Metrics Visualization",status:"unknown",lastChecked:null,responseTime:null,job:"grafana",instance:"dashboard",url:"http://192.168.0.99:3000",healthEndpoint:"http://192.168.0.99:3000/api/health"},{id:"deluge",name:"Deluge Web UI",description:"Torrent Management Interface",status:"unknown",lastChecked:null,responseTime:null,job:"deluge-web",instance:"torrent-ui",url:"http://192.168.0.111:8112",healthEndpoint:"http://192.168.0.111:8112/"},{id:"filebrowser",name:"File Browser",description:"File Management Interface",status:"unknown",lastChecked:null,responseTime:null,job:"filebrowser",instance:"file-manager",url:"http://192.168.0.99:8080",healthEndpoint:"http://192.168.0.99:8080/health"},{id:"proxmox",name:"Proxmox VE",description:"Virtualization Management",status:"unknown",lastChecked:null,responseTime:null,job:"proxmox",instance:"hypervisor",url:"https://192.168.0.99:8006",healthEndpoint:"https://192.168.0.99:8006/api2/json/version"}]),t=E({totalServices:0,onlineServices:0,offlineServices:0,healthyPercentage:0,lastUpdateTime:null}),a=E(!1),u=E(""),k=E(!0),_=E(!1);let c=null;const x=M(()=>s.value.filter(p=>p.status==="online")),S=M(()=>s.value.filter(p=>p.status==="offline")),C=M(()=>s.value.filter(p=>p.status==="checking")),A=M(()=>s.value.filter(p=>p.status==="offline"&&["prometheus","node-exporter"].includes(p.id))),m=async p=>{try{const U=`up{job="${p.job}",instance="${p.instance}"}`,j=await q.query(U);if(j.status==="success"&&j.data.result.length>0){const O=K.extractValue(j.data.result);p.status=O===1?"online":"offline",p.lastChecked=new Date,await b(p)}else p.status="unknown",p.lastChecked=new Date}catch(U){console.warn(`Prometheus check failed for ${p.name}:`,U),p.status="unknown",p.lastChecked=new Date}},o=async p=>{if(!p.healthEndpoint)return;const U=Date.now();try{const j=new AbortController,O=setTimeout(()=>j.abort(),5e3),se=await fetch(p.healthEndpoint,{method:"GET",signal:j.signal,mode:"no-cors"});clearTimeout(O),p.responseTime=Date.now()-U,p.lastChecked=new Date,p.status="online"}catch(j){p.responseTime=Date.now()-U,p.lastChecked=new Date,p.status="offline",console.warn(`HTTP health check failed for ${p.name}:`,j)}},b=async p=>{try{const U=[];switch(U.push(q.query("node_time_seconds - node_boot_time_seconds").catch(()=>null)),p.id){case"deluge-exporter":U.push(q.query(H.delugeActiveDownloads).catch(()=>null),q.query(H.delugeDownloadSpeed).catch(()=>null),q.query(H.delugeUploadSpeed).catch(()=>null));break;case"zfs-exporter":U.push(q.query(H.zfsPoolHealth).catch(()=>null),q.query(H.zfsPoolUsagePercent).catch(()=>null));break;case"cadvisor":U.push(q.query(H.containerCount).catch(()=>null));break}const j=await Promise.allSettled(U);p.metrics||(p.metrics={}),j.forEach((O,se)=>{var P;if(O.status==="fulfilled"&&((P=O.value)==null?void 0:P.status)==="success"){const I=K.extractValue(O.value.data.result);switch(se){case 0:p.metrics.uptime=I;break;default:if(p.id==="deluge-exporter")switch(se){case 1:p.metrics.customMetrics={...p.metrics.customMetrics,activeDownloads:I};break;case 2:p.metrics.customMetrics={...p.metrics.customMetrics,downloadSpeed:I};break;case 3:p.metrics.customMetrics={...p.metrics.customMetrics,uploadSpeed:I};break}break}}})}catch(U){console.warn(`Failed to fetch metrics for ${p.name}:`,U)}},T=async p=>{p.status="checking",await m(p),p.status==="unknown"&&p.healthEndpoint&&await o(p)},R=async()=>{try{a.value=!0,u.value="";const p=s.value.map(U=>T(U));await Promise.allSettled(p),y()}catch(p){console.error("Failed to check services health:",p),u.value=p instanceof Error?p.message:"Unknown error"}finally{a.value=!1}},y=()=>{const p=s.value.length,U=x.value.length,j=S.value.length;t.value={totalServices:p,onlineServices:U,offlineServices:j,healthyPercentage:p>0?U/p*100:0,lastUpdateTime:new Date}},v=async p=>{const U=s.value.find(j=>j.id===p);U&&(await T(U),y())},i=async()=>{_.value=!0,await R(),_.value=!1},h=()=>{c||(R(),c=setInterval(R,6e4))},g=()=>{c&&(clearInterval(c),c=null)},f=()=>{k.value=!k.value,k.value?h():g()},w=p=>s.value.find(U=>U.id===p),V=p=>s.value.filter(U=>U.status===p);return ne(()=>{g()}),{services:ee(s),serviceMetrics:ee(t),isLoading:ee(a),error:ee(u),isAutoRefreshEnabled:ee(k),isRefreshing:ee(_),onlineServices:x,offlineServices:S,checkingServices:C,criticalServices:A,checkServiceHealth:T,checkAllServicesHealth:R,refreshService:v,refreshAllServices:i,startAutoRefresh:h,stopAutoRefresh:g,toggleAutoRefresh:f,getServiceById:w,getServicesByStatus:V}},qt={class:"service-header"},Bt={class:"service-info"},Ht={class:"service-name"},zt={class:"service-description"},Vt={class:"service-status"},jt={key:0,class:"service-metrics"},Ft={key:0,class:"metric-row"},Lt={class:"metric-value"},Ot={key:1,class:"metric-row"},Nt={class:"metric-value"},Gt={key:2},Wt={key:0,class:"metric-row"},Kt={class:"metric-value"},Zt={key:1,class:"metric-row"},Xt={class:"metric-value"},Yt={key:1,class:"service-timestamp"},Qt={class:"text-xs opacity-60"},Jt={class:"service-actions"},es=["disabled"],ts=Y({__name:"ServiceHealthCard",props:{service:{}},emits:["refresh","open"],setup(s){const t=s,a={prometheus:re,"node-exporter":oe,cadvisor:Z,"zfs-exporter":re,"deluge-exporter":ie,plex:$e,grafana:ge,deluge:ie,filebrowser:_e,proxmox:oe},u=M(()=>a[t.service.id]||pe),k=M(()=>({"service-online":t.service.status==="online","service-offline":t.service.status==="offline","service-checking":t.service.status==="checking","service-unknown":t.service.status==="unknown"})),_=M(()=>({"status-online":t.service.status==="online","status-offline":t.service.status==="offline","status-checking":t.service.status==="checking","status-unknown":t.service.status==="unknown"})),c=M(()=>{switch(t.service.status){case"online":return"âœ…";case"offline":return"âŒ";case"checking":return"ðŸ”„";case"unknown":return"â“";default:return"â“"}}),x=m=>{const o=Math.floor(m/86400),b=Math.floor(m%86400/3600),T=Math.floor(m%3600/60);return o>0?`${o}d ${b}h`:b>0?`${b}h ${T}m`:`${T}m`},S=m=>{if(m===0)return"0 B";const o=1024,b=["B","KB","MB","GB"],T=Math.floor(Math.log(m)/Math.log(o));return parseFloat((m/Math.pow(o,T)).toFixed(1))+" "+b[T]},C=m=>{const b=Date.now()-m.getTime();return b<6e4?`${Math.floor(b/1e3)}s ago`:b<36e5?`${Math.floor(b/6e4)}m ago`:`${Math.floor(b/36e5)}h ago`},A=()=>{t.service.url&&window.open(t.service.url,"_blank")};return(m,o)=>(r(),l("div",{class:B(["service-card",k.value]),onClick:A},[e("div",qt,[e("div",Bt,[(r(),N(X(u.value),{class:"service-icon w-4 h-4"})),e("div",null,[e("h4",Ht,n(m.service.name),1),e("p",zt,n(m.service.description),1)])]),e("div",Vt,[e("div",{class:B(["status-indicator",_.value])},n(c.value),3)])]),m.service.metrics?(r(),l("div",jt,[m.service.metrics.uptime?(r(),l("div",Ft,[o[2]||(o[2]=e("span",{class:"metric-label"},"Uptime:",-1)),e("span",Lt,n(x(m.service.metrics.uptime)),1)])):$("",!0),m.service.responseTime?(r(),l("div",Ot,[o[3]||(o[3]=e("span",{class:"metric-label"},"Response:",-1)),e("span",Nt,n(m.service.responseTime)+"ms",1)])):$("",!0),m.service.id==="deluge-exporter"&&m.service.metrics.customMetrics?(r(),l("div",Gt,[m.service.metrics.customMetrics.activeDownloads!==void 0?(r(),l("div",Wt,[o[4]||(o[4]=e("span",{class:"metric-label"},"Downloads:",-1)),e("span",Kt,n(m.service.metrics.customMetrics.activeDownloads),1)])):$("",!0),m.service.metrics.customMetrics.downloadSpeed?(r(),l("div",Zt,[o[5]||(o[5]=e("span",{class:"metric-label"},"â¬‡ Speed:",-1)),e("span",Xt,n(S(m.service.metrics.customMetrics.downloadSpeed))+"/s",1)])):$("",!0)])):$("",!0)])):$("",!0),m.service.lastChecked?(r(),l("div",Yt,[e("span",Qt," Last checked: "+n(C(m.service.lastChecked)),1)])):$("",!0),e("div",Jt,[e("button",{onClick:o[0]||(o[0]=ue(b=>m.$emit("refresh",m.service.id),["stop"])),disabled:m.service.status==="checking",class:"action-button refresh-button"},[D(d(le),{class:B(["w-3 h-3",{"animate-spin":m.service.status==="checking"}])},null,8,["class"]),o[6]||(o[6]=W(" Refresh ",-1))],8,es),m.service.url?(r(),l("button",{key:0,onClick:o[1]||(o[1]=ue(b=>m.$emit("open",m.service.url),["stop"])),class:"action-button open-button"},[D(d(we),{class:"w-3 h-3"}),o[7]||(o[7]=W(" Open ",-1))])):$("",!0)])],2))}}),ss=Q(ts,[["__scopeId","data-v-d9e430d4"]]),as={class:"mario-card service-health-dashboard"},os={class:"dashboard-header"},rs={class:"text-lg font-semibold flex items-center gap-2",style:{color:"var(--text-color)"}},is={class:"health-summary"},ns={class:"service-count online"},ls={class:"service-count offline"},cs={class:"service-count checking"},us={class:"overall-health mb-4 p-3 rounded-lg",style:{background:"var(--section-bg)"}},ds={class:"flex items-center justify-between"},ms={class:"flex items-center gap-2"},hs={class:"text-sm font-medium",style:{color:"var(--text-color)"}},vs={key:0,class:"text-xs opacity-60",style:{color:"var(--text-color)"}},ps={class:"health-bar mt-2"},gs={class:"services-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},ys={key:0,class:"critical-alerts mb-4"},fs={class:"text-sm font-medium text-red-300 mb-2 flex items-center gap-1"},ks={class:"space-y-2"},bs={class:"health-actions flex items-center justify-between flex-wrap gap-3"},ws={class:"flex items-center space-x-3"},_s=["disabled"],$s={class:"service-stats text-xs opacity-60",style:{color:"var(--text-color)"}},Ms={key:1,class:"error-message mt-3 p-2 rounded bg-red-900/20 border border-red-500/30 text-red-200 text-sm"},xs=Y({__name:"ServiceHealthDashboard",setup(s){const{services:t,serviceMetrics:a,error:u,isAutoRefreshEnabled:k,isRefreshing:_,onlineServices:c,offlineServices:x,checkingServices:S,criticalServices:C,refreshService:A,refreshAllServices:m,toggleAutoRefresh:o,startAutoRefresh:b,stopAutoRefresh:T}=Ie(),R=M(()=>{const g=a.value.healthyPercentage;return g>=90?"health-excellent":g>=75?"health-good":g>=50?"health-warning":"health-critical"}),y=M(()=>{const g=a.value.healthyPercentage;return g>=90?"ðŸŸ¢":g>=75?"ðŸŸ¡":g>=50?"ðŸŸ ":"ðŸ”´"}),v=M(()=>{const g=a.value.healthyPercentage;let f="#ef4444";return g>=90?f="#10b981":g>=75?f="#f59e0b":g>=50&&(f="#f97316"),{width:`${g}%`,backgroundColor:f,transition:"all 0.5s ease"}}),i=M(()=>{if(!a.value.lastUpdateTime)return"never";const g=Date.now()-a.value.lastUpdateTime.getTime();return g<6e4?`${Math.floor(g/1e3)}s ago`:g<36e5?`${Math.floor(g/6e4)}m ago`:`${Math.floor(g/36e5)}h ago`}),h=g=>{g&&window.open(g,"_blank")};return ve(()=>{m(),k.value&&b()}),ne(()=>{T()}),(g,f)=>(r(),l("div",as,[e("div",os,[e("h3",rs,[D(d(pe),{class:"w-5 h-5"}),f[2]||(f[2]=W(" Service Health Dashboard ",-1))]),e("div",is,[e("span",ns,n(d(c).length)+" Online",1),e("span",ls,n(d(x).length)+" Offline",1),e("span",cs,n(d(S).length)+" Checking",1)])]),e("div",us,[e("div",ds,[e("div",ms,[e("div",{class:B(["health-indicator",R.value])},n(y.value),3),e("span",hs," Overall Health: "+n(d(a).healthyPercentage.toFixed(1))+"% ",1)]),d(a).lastUpdateTime?(r(),l("div",vs," Last updated "+n(i.value),1)):$("",!0)]),e("div",ps,[e("div",{class:"health-fill",style:me(v.value)},null,4)])]),e("div",gs,[(r(!0),l(te,null,ae(d(t),w=>(r(),N(ss,{key:w.id,service:w,onRefresh:d(A),onOpen:h},null,8,["service","onRefresh"]))),128))]),d(C).length>0?(r(),l("div",ys,[e("h4",fs,[D(d(he),{class:"w-4 h-4"}),f[3]||(f[3]=W(" Critical Services Down ",-1))]),e("div",ks,[(r(!0),l(te,null,ae(d(C),w=>(r(),l("div",{key:w.id,class:"p-2 rounded bg-red-900/20 border border-red-500/30 text-red-200 text-sm"},n(w.name)+" - "+n(w.description),1))),128))])])):$("",!0),e("div",bs,[e("div",ws,[e("button",{onClick:f[0]||(f[0]=(...w)=>d(m)&&d(m)(...w)),disabled:d(_),class:"mario-button flex items-center gap-2"},[D(d(le),{class:B(["w-4 h-4",{"animate-spin":d(_)}])},null,8,["class"]),f[4]||(f[4]=W(" Refresh All Services ",-1))],8,_s),e("button",{onClick:f[1]||(f[1]=(...w)=>d(o)&&d(o)(...w)),class:B(["mario-button",d(k)?"mario-button-accent":"mario-button-secondary"])},[D(d(Le),{class:"w-4 h-4 mr-2"}),W(" Auto-refresh: "+n(d(k)?"On":"Off"),1)],2)]),e("div",$s,n(d(a).totalServices)+" services monitored ",1)]),d(u)?(r(),l("div",Ms," âš ï¸ "+n(d(u)),1)):$("",!0)]))}}),Cs=Q(xs,[["__scopeId","data-v-77131644"]]),Ss={class:"metric-header"},Us={class:"metric-info"},Ts={class:"metric-title"},As={class:"metric-value"},Ds={key:0,class:"metric-footer"},Ps={class:"metric-subtitle"},Rs={class:"metric-status-bar"},Es=Y({__name:"MobileMetricCard",props:{metric:{}},emits:["tap"],setup(s){const t=s,a={Cpu:Ce,MemoryStick:ke,HardDrive:de,Activity:Z,Zap:be},u=M(()=>a[t.metric.icon]||be),k=M(()=>({"metric-normal":t.metric.status==="normal","metric-warning":t.metric.status==="warning","metric-critical":t.metric.status==="critical"})),_=M(()=>{const c=Math.min(t.metric.rawValue,100);let x="var(--monitoring-success)";return t.metric.status==="warning"&&(x="var(--monitoring-warning)"),t.metric.status==="critical"&&(x="var(--monitoring-critical)"),{width:`${c}%`,backgroundColor:x,transition:"all 0.3s ease"}});return(c,x)=>(r(),l("div",{class:B(["mobile-metric-card",k.value]),onClick:x[0]||(x[0]=S=>c.$emit("tap",c.metric))},[e("div",Ss,[(r(),N(X(u.value),{class:"metric-icon w-5 h-5"})),e("div",Us,[e("h4",Ts,n(c.metric.title),1),e("div",As,n(c.metric.value),1)])]),c.metric.subtitle?(r(),l("div",Ds,[e("span",Ps,n(c.metric.subtitle),1)])):$("",!0),e("div",Rs,[e("div",{class:"status-fill",style:me(_.value)},null,4)])],2))}}),Is=Q(Es,[["__scopeId","data-v-2bfbafc4"]]),qs={class:"service-content"},Bs={class:"service-main"},Hs={class:"service-icon-status"},zs={class:"service-info"},Vs={class:"service-name"},js={class:"service-description"},Fs={key:0,class:"service-details"},Ls={key:0,class:"detail-item"},Os={class:"detail-value"},Ns={key:1,class:"detail-item"},Gs={class:"detail-value"},Ws={key:2},Ks={key:0,class:"detail-item"},Zs={class:"detail-value"},Xs={key:1,class:"detail-item"},Ys={class:"detail-value"},Qs={class:"service-actions"},Js=["disabled"],ea={key:0,class:"service-timestamp"},ta={class:"text-xs opacity-60"},sa=Y({__name:"MobileServiceCard",props:{service:{}},emits:["tap","refresh"],setup(s){const t=s,a={prometheus:re,"node-exporter":oe,cadvisor:Z,"zfs-exporter":re,"deluge-exporter":ie,plex:$e,grafana:ge,deluge:ie,filebrowser:_e,proxmox:oe},u=M(()=>a[t.service.id]||pe),k=M(()=>({"service-online":t.service.status==="online","service-offline":t.service.status==="offline","service-checking":t.service.status==="checking","service-unknown":t.service.status==="unknown"})),_=M(()=>({"status-online":t.service.status==="online","status-offline":t.service.status==="offline","status-checking":t.service.status==="checking","status-unknown":t.service.status==="unknown"})),c=M(()=>{switch(t.service.status){case"online":return"â—";case"offline":return"â—";case"checking":return"â—‹";case"unknown":return"?";default:return"?"}}),x=M(()=>{var o,b;return t.service.responseTime||((o=t.service.metrics)==null?void 0:o.uptime)||((b=t.service.metrics)==null?void 0:b.customMetrics)&&Object.keys(t.service.metrics.customMetrics).length>0}),S=o=>{const b=Math.floor(o/86400),T=Math.floor(o%86400/3600);return b>0?`${b}d ${T}h`:T>0?`${T}h`:"<1h"},C=o=>{if(o===0)return"0 B";const b=1024,T=["B","KB","MB","GB"],R=Math.floor(Math.log(o)/Math.log(b));return parseFloat((o/Math.pow(b,R)).toFixed(1))+" "+T[R]},A=o=>{const T=Date.now()-o.getTime();return T<6e4?`${Math.floor(T/1e3)}s ago`:T<36e5?`${Math.floor(T/6e4)}m ago`:`${Math.floor(T/36e5)}h ago`},m=()=>{t.service.url&&window.open(t.service.url,"_blank")};return(o,b)=>{var T,R;return r(),l("div",{class:B(["mobile-service-card",k.value]),onClick:b[1]||(b[1]=y=>o.$emit("tap",o.service))},[e("div",qs,[e("div",Bs,[e("div",Hs,[(r(),N(X(u.value),{class:"service-icon w-5 h-5"})),e("div",{class:B(["status-indicator",_.value])},n(c.value),3)]),e("div",zs,[e("h4",Vs,n(o.service.name),1),e("p",js,n(o.service.description),1),x.value?(r(),l("div",Fs,[o.service.responseTime?(r(),l("div",Ls,[b[2]||(b[2]=e("span",{class:"detail-label"},"Response:",-1)),e("span",Os,n(o.service.responseTime)+"ms",1)])):$("",!0),(T=o.service.metrics)!=null&&T.uptime?(r(),l("div",Ns,[b[3]||(b[3]=e("span",{class:"detail-label"},"Uptime:",-1)),e("span",Gs,n(S(o.service.metrics.uptime)),1)])):$("",!0),o.service.id==="deluge-exporter"&&((R=o.service.metrics)!=null&&R.customMetrics)?(r(),l("div",Ws,[o.service.metrics.customMetrics.activeDownloads!==void 0?(r(),l("div",Ks,[b[4]||(b[4]=e("span",{class:"detail-label"},"Downloads:",-1)),e("span",Zs,n(o.service.metrics.customMetrics.activeDownloads),1)])):$("",!0),o.service.metrics.customMetrics.downloadSpeed?(r(),l("div",Xs,[b[5]||(b[5]=e("span",{class:"detail-label"},"â¬‡ Speed:",-1)),e("span",Ys,n(C(o.service.metrics.customMetrics.downloadSpeed))+"/s",1)])):$("",!0)])):$("",!0)])):$("",!0)])]),e("div",Qs,[e("button",{onClick:b[0]||(b[0]=ue(y=>o.$emit("refresh",o.service.id),["stop"])),disabled:o.service.status==="checking",class:"action-button refresh-button"},[D(d(le),{class:B(["w-3 h-3",{"animate-spin":o.service.status==="checking"}])},null,8,["class"])],8,Js),o.service.url?(r(),l("button",{key:0,onClick:ue(m,["stop"]),class:"action-button open-button"},[D(d(we),{class:"w-3 h-3"})])):$("",!0)])]),o.service.lastChecked?(r(),l("div",ea,[e("span",ta," Last checked: "+n(A(o.service.lastChecked)),1)])):$("",!0)],2)}}}),aa=Q(sa,[["__scopeId","data-v-7cdd71c4"]]),oa={class:"alert-content"},ra={class:"alert-icon"},ia={class:"alert-info"},na={class:"alert-title"},la={class:"alert-description"},ca={class:"alert-meta"},ua={class:"alert-timestamp"},da={key:0,class:"alert-action"},ma=Y({__name:"MobileAlertCard",props:{alert:{}},setup(s){const t=s,a={critical:De,warning:he,info:Oe},u=M(()=>a[t.alert.type]||Fe),k=M(()=>({"alert-critical":t.alert.type==="critical","alert-warning":t.alert.type==="warning","alert-info":t.alert.type==="info"})),_=c=>{const S=Date.now()-c.getTime();return S<6e4?`${Math.floor(S/1e3)}s ago`:S<36e5?`${Math.floor(S/6e4)}m ago`:S<864e5?`${Math.floor(S/36e5)}h ago`:`${Math.floor(S/864e5)}d ago`};return(c,x)=>(r(),l("div",{class:B(["mobile-alert-card",k.value])},[e("div",oa,[e("div",ra,[(r(),N(X(u.value),{class:"w-5 h-5"}))]),e("div",ia,[e("h4",na,n(c.alert.title),1),e("p",la,n(c.alert.description),1),e("div",ca,[e("span",ua,n(_(c.alert.timestamp)),1),c.alert.action?(r(),l("span",da,n(c.alert.action),1)):$("",!0)])])])],2))}}),ha=Q(ma,[["__scopeId","data-v-7d342b0d"]]),va={class:"modal-header",style:{background:"var(--section-bg)","border-color":"var(--primary-color)"}},pa={class:"modal-title",style:{color:"var(--text-color)"}},ga={class:"modal-body"},ya={class:"metric-display"},fa={class:"metric-large-value"},ka={class:"detail-section"},ba={class:"detail-grid"},wa={key:0,class:"detail-item"},_a={class:"detail-value"},$a={class:"detail-item"},Ma={class:"detail-item"},xa={class:"detail-value"},Ca={key:0,class:"recommendations-section"},Sa={class:"recommendations-list"},Ua={class:"recommendation-text"},Ta={class:"actions-section"},Aa={class:"action-buttons"},Da=Y({__name:"MobileMetricDetailModal",props:{metric:{}},emits:["close"],setup(s){const t=s,a={Cpu:Ce,MemoryStick:ke,HardDrive:de,Activity:Z},u=M(()=>a[t.metric.icon]||Z),k=M(()=>({"status-normal":t.metric.status==="normal","status-warning":t.metric.status==="warning","status-critical":t.metric.status==="critical"})),_=M(()=>({"text-success":t.metric.status==="normal","text-warning":t.metric.status==="warning","text-critical":t.metric.status==="critical"})),c=M(()=>{switch(t.metric.status){case"normal":return"Normal";case"warning":return"Warning";case"critical":return"Critical";default:return"Unknown"}}),x=M(()=>{const m=[];return t.metric.id==="cpu"&&t.metric.status==="critical"&&m.push({id:"cpu-high",icon:Z,text:"Check for high CPU processes and consider optimizing workloads"}),t.metric.id==="memory"&&t.metric.status==="warning"&&m.push({id:"memory-warning",icon:ke,text:"Consider closing unused applications or adding more RAM"}),t.metric.id==="storage"&&t.metric.status==="critical"&&m.push({id:"storage-critical",icon:de,text:"Free up disk space or expand storage capacity immediately"}),t.metric.status==="normal"&&m.push({id:"system-healthy",icon:xe,text:"System is operating within normal parameters"}),m}),S=()=>{console.log("Refreshing metric:",t.metric.id)},C=()=>{console.log("Viewing processes")},A=()=>{console.log("Viewing storage details")};return(m,o)=>(r(),l("div",{class:"modal-overlay",onClick:o[2]||(o[2]=b=>m.$emit("close"))},[e("div",{class:"modal-content",onClick:o[1]||(o[1]=ue(()=>{},["stop"]))},[e("div",va,[e("h3",pa,n(m.metric.title)+" Details",1),e("button",{onClick:o[0]||(o[0]=b=>m.$emit("close")),class:"close-button"},[D(d(Pe),{class:"w-5 h-5"})])]),e("div",ga,[e("div",ya,[(r(),N(X(u.value),{class:"metric-large-icon w-12 h-12"})),e("div",fa,n(m.metric.value),1),e("div",{class:B(["metric-status-badge",k.value])},n(c.value),3)]),e("div",ka,[o[6]||(o[6]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"System Information",-1)),e("div",ba,[m.metric.subtitle?(r(),l("div",wa,[o[3]||(o[3]=e("span",{class:"detail-label"},"Current Usage:",-1)),e("span",_a,n(m.metric.subtitle),1)])):$("",!0),e("div",$a,[o[4]||(o[4]=e("span",{class:"detail-label"},"Status:",-1)),e("span",{class:B(["detail-value",_.value])},n(c.value),3)]),e("div",Ma,[o[5]||(o[5]=e("span",{class:"detail-label"},"Raw Value:",-1)),e("span",xa,n(m.metric.rawValue.toFixed(2))+"%",1)])])]),x.value.length>0?(r(),l("div",Ca,[o[7]||(o[7]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"Recommendations",-1)),e("div",Sa,[(r(!0),l(te,null,ae(x.value,b=>(r(),l("div",{key:b.id,class:"recommendation-item"},[(r(),N(X(b.icon),{class:"w-4 h-4 recommendation-icon"})),e("span",Ua,n(b.text),1)]))),128))])])):$("",!0),e("div",Ta,[o[11]||(o[11]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"Quick Actions",-1)),e("div",Aa,[e("button",{class:"action-button",onClick:S},[D(d(le),{class:"w-4 h-4 mr-2"}),o[8]||(o[8]=W(" Refresh ",-1))]),m.metric.id==="cpu"?(r(),l("button",{key:0,class:"action-button",onClick:C},[D(d(Z),{class:"w-4 h-4 mr-2"}),o[9]||(o[9]=W(" View Processes ",-1))])):$("",!0),m.metric.id==="storage"?(r(),l("button",{key:1,class:"action-button",onClick:A},[D(d(de),{class:"w-4 h-4 mr-2"}),o[10]||(o[10]=W(" Storage Details ",-1))])):$("",!0)])])])])]))}}),Pa=Q(Da,[["__scopeId","data-v-47f384d1"]]),Ra={class:"modal-header",style:{background:"var(--section-bg)","border-color":"var(--primary-color)"}},Ea={class:"header-info"},Ia={class:"modal-title",style:{color:"var(--text-color)"}},qa={class:"service-description",style:{color:"var(--text-color)"}},Ba={class:"modal-body"},Ha={class:"status-section"},za={class:"status-display"},Va={class:"status-info"},ja={key:0,class:"last-check",style:{color:"var(--text-color)"}},Fa={class:"details-section"},La={class:"detail-grid"},Oa={class:"detail-item"},Na={class:"detail-value"},Ga={class:"detail-item"},Wa={class:"detail-value"},Ka={key:0,class:"detail-item"},Za={class:"detail-value"},Xa={key:1,class:"detail-item"},Ya={class:"detail-value url-value"},Qa={key:0,class:"metrics-section"},Ja={class:"metrics-grid"},eo={key:0,class:"metric-item"},to={class:"metric-value"},so={key:0,class:"metric-item"},ao={class:"metric-value"},oo={key:1,class:"metric-item"},ro={class:"metric-value"},io={key:2,class:"metric-item"},no={class:"metric-value"},lo={key:1,class:"recommendations-section"},co={class:"recommendations-list"},uo={class:"recommendation-text"},mo={class:"actions-section"},ho={class:"action-buttons"},vo=["disabled"],po=Y({__name:"MobileServiceDetailModal",props:{service:{}},emits:["close","refresh"],setup(s,{emit:t}){const a=s,u=t,k={prometheus:re,"node-exporter":oe,cadvisor:Z,"zfs-exporter":re,"deluge-exporter":ie,plex:$e,grafana:ge,deluge:ie,filebrowser:_e,proxmox:oe},_=M(()=>k[a.service.id]||pe),c=M(()=>({"status-online":a.service.status==="online","status-offline":a.service.status==="offline","status-checking":a.service.status==="checking","status-unknown":a.service.status==="unknown"})),x=M(()=>{switch(a.service.status){case"online":return"âœ…";case"offline":return"âŒ";case"checking":return"ðŸ”„";case"unknown":return"â“";default:return"â“"}}),S=M(()=>{switch(a.service.status){case"online":return"Online";case"offline":return"Offline";case"checking":return"Checking";case"unknown":return"Unknown";default:return"Unknown"}}),C=M(()=>{var v,i;return((v=a.service.metrics)==null?void 0:v.uptime)||((i=a.service.metrics)==null?void 0:i.customMetrics)&&Object.keys(a.service.metrics.customMetrics).length>0}),A=M(()=>{const v=[];switch(a.service.status){case"online":v.push({id:"service-healthy",type:"success",icon:xe,text:"Service is running normally and responding to requests"});break;case"offline":v.push({id:"service-down",type:"critical",icon:De,text:"Service is not responding. Check service logs and restart if necessary"});break;case"checking":v.push({id:"service-checking",type:"warning",icon:Z,text:"Currently checking service status. Please wait for results"});break;case"unknown":v.push({id:"service-unknown",type:"warning",icon:he,text:"Unable to determine service status. Check network connectivity and service configuration"});break}return a.service.responseTime&&a.service.responseTime>5e3&&v.push({id:"slow-response",type:"warning",icon:he,text:"Service response time is slower than expected. Consider investigating performance issues"}),v}),m=v=>{const i=Math.floor(v/86400),h=Math.floor(v%86400/3600),g=Math.floor(v%3600/60);return i>0?`${i}d ${h}h ${g}m`:h>0?`${h}h ${g}m`:`${g}m`},o=v=>{if(v===0)return"0 B";const i=1024,h=["B","KB","MB","GB"],g=Math.floor(Math.log(v)/Math.log(i));return parseFloat((v/Math.pow(i,g)).toFixed(1))+" "+h[g]},b=v=>{const h=Date.now()-v.getTime();return h<6e4?`${Math.floor(h/1e3)}s ago`:h<36e5?`${Math.floor(h/6e4)}m ago`:h<864e5?`${Math.floor(h/36e5)}h ago`:`${Math.floor(h/864e5)}d ago`},T=()=>{u("refresh",a.service.id)},R=()=>{a.service.url&&window.open(a.service.url,"_blank")},y=()=>{a.service.healthEndpoint&&window.open(a.service.healthEndpoint,"_blank")};return(v,i)=>{var h,g;return r(),l("div",{class:"modal-overlay",onClick:i[2]||(i[2]=f=>v.$emit("close"))},[e("div",{class:"modal-content",onClick:i[1]||(i[1]=ue(()=>{},["stop"]))},[e("div",Ra,[e("div",Ea,[e("h3",Ia,n(v.service.name),1),e("p",qa,n(v.service.description),1)]),e("button",{onClick:i[0]||(i[0]=f=>v.$emit("close")),class:"close-button"},[D(d(Pe),{class:"w-5 h-5"})])]),e("div",Ba,[e("div",Ha,[e("div",za,[(r(),N(X(_.value),{class:"service-large-icon w-12 h-12"})),e("div",Va,[e("div",{class:B(["status-badge",c.value])},n(x.value)+" "+n(S.value),3),v.service.lastChecked?(r(),l("div",ja," Last checked: "+n(b(v.service.lastChecked)),1)):$("",!0)])])]),e("div",Fa,[i[7]||(i[7]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"Service Details",-1)),e("div",La,[e("div",Oa,[i[3]||(i[3]=e("span",{class:"detail-label"},"Job:",-1)),e("span",Na,n(v.service.job),1)]),e("div",Ga,[i[4]||(i[4]=e("span",{class:"detail-label"},"Instance:",-1)),e("span",Wa,n(v.service.instance),1)]),v.service.responseTime?(r(),l("div",Ka,[i[5]||(i[5]=e("span",{class:"detail-label"},"Response Time:",-1)),e("span",Za,n(v.service.responseTime)+"ms",1)])):$("",!0),v.service.url?(r(),l("div",Xa,[i[6]||(i[6]=e("span",{class:"detail-label"},"URL:",-1)),e("span",Ya,n(v.service.url),1)])):$("",!0)])]),C.value?(r(),l("div",Qa,[i[12]||(i[12]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"Metrics",-1)),e("div",Ja,[(h=v.service.metrics)!=null&&h.uptime?(r(),l("div",eo,[i[8]||(i[8]=e("span",{class:"metric-label"},"Uptime:",-1)),e("span",to,n(m(v.service.metrics.uptime)),1)])):$("",!0),v.service.id==="deluge-exporter"&&((g=v.service.metrics)!=null&&g.customMetrics)?(r(),l(te,{key:1},[v.service.metrics.customMetrics.activeDownloads!==void 0?(r(),l("div",so,[i[9]||(i[9]=e("span",{class:"metric-label"},"Active Downloads:",-1)),e("span",ao,n(v.service.metrics.customMetrics.activeDownloads),1)])):$("",!0),v.service.metrics.customMetrics.downloadSpeed?(r(),l("div",oo,[i[10]||(i[10]=e("span",{class:"metric-label"},"Download Speed:",-1)),e("span",ro,n(o(v.service.metrics.customMetrics.downloadSpeed))+"/s",1)])):$("",!0),v.service.metrics.customMetrics.uploadSpeed?(r(),l("div",io,[i[11]||(i[11]=e("span",{class:"metric-label"},"Upload Speed:",-1)),e("span",no,n(o(v.service.metrics.customMetrics.uploadSpeed))+"/s",1)])):$("",!0)],64)):$("",!0)])])):$("",!0),A.value.length>0?(r(),l("div",lo,[i[13]||(i[13]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"Health Status",-1)),e("div",co,[(r(!0),l(te,null,ae(A.value,f=>(r(),l("div",{key:f.id,class:B(["recommendation-item",f.type])},[(r(),N(X(f.icon),{class:"w-4 h-4 recommendation-icon"})),e("span",uo,n(f.text),1)],2))),128))])])):$("",!0),e("div",mo,[i[16]||(i[16]=e("h4",{class:"section-title",style:{color:"var(--text-color)"}},"Actions",-1)),e("div",ho,[e("button",{class:"action-button primary",onClick:T,disabled:v.service.status==="checking"},[D(d(le),{class:B(["w-4 h-4 mr-2",{"animate-spin":v.service.status==="checking"}])},null,8,["class"]),W(" "+n(v.service.status==="checking"?"Checking...":"Refresh Status"),1)],8,vo),v.service.url?(r(),l("button",{key:0,class:"action-button secondary",onClick:R},[D(d(we),{class:"w-4 h-4 mr-2"}),i[14]||(i[14]=W(" Open Service ",-1))])):$("",!0),v.service.healthEndpoint?(r(),l("button",{key:1,class:"action-button secondary",onClick:y},[D(d(Z),{class:"w-4 h-4 mr-2"}),i[15]||(i[15]=W(" Test Health Endpoint ",-1))])):$("",!0)])])])])])}}}),go=Q(po,[["__scopeId","data-v-64f9fd58"]]),yo={class:"mobile-header",style:{background:"var(--section-bg)","border-color":"var(--primary-color)"}},fo={class:"header-content"},ko={class:"mobile-controls"},bo={class:"flex items-center justify-between"},wo={class:"flex items-center gap-2"},_o={class:"health-indicator"},$o={class:"text-sm font-medium"},Mo={class:"text-xs opacity-70"},xo={class:"mobile-tabs",style:{background:"var(--section-bg)","border-color":"var(--primary-color)"}},Co=["onClick"],So={class:"tab-label"},Uo={key:0,class:"tab-badge"},To={class:"mobile-content"},Ao={key:0,class:"tab-content"},Do={class:"mobile-metrics-grid"},Po={key:0,class:"mobile-chart-container mt-4"},Ro={key:1,class:"tab-content"},Eo={class:"mobile-services-list"},Io={key:2,class:"tab-content"},qo={class:"mobile-alerts-list"},Bo={key:0,class:"no-alerts"},Ho=Y({__name:"MobileMonitoringDashboard",setup(s){const t=E("purple"),a={purple:"theme-purple",classic:"theme-classic",paint:"theme-paint",italy:"theme-italy",gameboy:"theme-gameboy"},u=()=>a[t.value]||"theme-purple",k=E("system"),_=E(null),c=E(null),x=E(!0),S=M(()=>[{id:"system",label:"System",icon:oe,badge:null},{id:"services",label:"Services",icon:pe,badge:R.value.onlineServices},{id:"alerts",label:"Alerts",icon:he,badge:i.value.length>0?i.value.length:null}]),{systemMetrics:C,historicalData:A,formattedMetrics:m,startMonitoring:o,stopMonitoring:b}=Re(),{services:T,serviceMetrics:R,isAutoRefreshEnabled:y,isRefreshing:v,criticalServices:i,refreshService:h,refreshAllServices:g,toggleAutoRefresh:f,startAutoRefresh:w,stopAutoRefresh:V}=Ie(),p=M(()=>[{id:"cpu",title:"CPU Usage",value:m.value.cpuUsage,rawValue:C.value.cpuUsage,icon:"Cpu",status:C.value.cpuUsage>90?"critical":C.value.cpuUsage>75?"warning":"normal",subtitle:`${C.value.cpuCores} cores`},{id:"memory",title:"Memory",value:m.value.memoryUsage,rawValue:C.value.memoryUsage,icon:"MemoryStick",status:C.value.memoryUsage>90?"critical":C.value.memoryUsage>75?"warning":"normal",subtitle:m.value.memoryUsed},{id:"storage",title:"Storage",value:m.value.diskUsage,rawValue:C.value.diskUsage,icon:"HardDrive",status:C.value.diskUsage>90?"critical":C.value.diskUsage>80?"warning":"normal",subtitle:m.value.diskUsed},{id:"load",title:"Load Avg",value:m.value.loadAverage,rawValue:C.value.loadAverage1m,icon:"Activity",status:C.value.loadAverage1m/C.value.cpuCores>1.5?"critical":C.value.loadAverage1m/C.value.cpuCores>1?"warning":"normal",subtitle:`${C.value.cpuCores} cores`}]),U=M(()=>{const L=[];return i.value.forEach(G=>{L.push({id:`service-${G.id}`,type:"critical",title:`${G.name} Offline`,description:G.description,timestamp:G.lastChecked||new Date,action:"Check service status"})}),C.value.cpuUsage>90&&L.push({id:"cpu-critical",type:"critical",title:"High CPU Usage",description:`CPU usage at ${m.value.cpuUsage}`,timestamp:C.value.lastUpdate||new Date,action:"Check running processes"}),C.value.memoryUsage>90&&L.push({id:"memory-critical",type:"critical",title:"High Memory Usage",description:`Memory usage at ${m.value.memoryUsage}`,timestamp:C.value.lastUpdate||new Date,action:"Check memory usage"}),L}),j=M(()=>A.value.map(L=>({timestamp:L.timestamp,value:L.cpuUsage})).slice(-20)),O=M(()=>getComputedStyle(document.documentElement).getPropertyValue("--primary-color").trim()),se=M(()=>{const L=R.value.healthyPercentage;return L>=90?"ðŸŸ¢":L>=75?"ðŸŸ¡":L>=50?"ðŸŸ ":"ðŸ”´"}),P=M(()=>{const L=R.value.healthyPercentage;return L>=90?"health-excellent":L>=75?"health-good":L>=50?"health-warning":"health-critical"}),I=L=>{_.value=L},J=L=>{c.value=L},ce=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()};return ve(()=>{o(),g(),y.value&&w()}),ne(()=>{b(),V()}),(L,G)=>(r(),l("div",{class:B(["mobile-monitoring-dashboard",u()])},[e("div",yo,[e("div",fo,[G[3]||(G[3]=e("h2",{class:"text-xl font-bold",style:{color:"var(--text-color)"}},"ðŸ¤– System Monitor",-1)),e("div",ko,[e("button",{onClick:G[0]||(G[0]=(...F)=>d(f)&&d(f)(...F)),class:B(["mobile-control-btn",{active:d(y)}])},[D(d(le),{class:B(["w-4 h-4",{"animate-spin":d(v)}])},null,8,["class"])],2),e("button",{onClick:ce,class:"mobile-control-btn"},[D(d(Ne),{class:"w-4 h-4"})])])]),e("div",{class:B(["health-banner",P.value])},[e("div",bo,[e("div",wo,[e("div",_o,n(se.value),1),e("span",$o,n(d(R).onlineServices)+"/"+n(d(R).totalServices)+" Online ",1)]),e("span",Mo,n(d(R).healthyPercentage.toFixed(0))+"% Healthy ",1)])],2)]),e("div",xo,[(r(!0),l(te,null,ae(S.value,F=>(r(),l("button",{key:F.id,onClick:Se=>k.value=F.id,class:B(["mobile-tab",{active:k.value===F.id}])},[(r(),N(X(F.icon),{class:"w-4 h-4"})),e("span",So,n(F.label),1),F.badge?(r(),l("div",Uo,n(F.badge),1)):$("",!0)],10,Co))),128))]),e("div",To,[k.value==="system"?(r(),l("div",Ao,[e("div",Do,[(r(!0),l(te,null,ae(p.value,F=>(r(),N(Is,{key:F.id,metric:F,onTap:Se=>I(F)},null,8,["metric","onTap"]))),128))]),x.value?(r(),l("div",Po,[G[4]||(G[4]=e("h4",{class:"text-sm font-medium mb-2",style:{color:"var(--text-color)"}},"CPU Usage Trend",-1)),D(Ee,{data:j.value,type:"area",height:"100",color:O.value,"show-header":!1},null,8,["data","color"])])):$("",!0)])):$("",!0),k.value==="services"?(r(),l("div",Ro,[e("div",Eo,[(r(!0),l(te,null,ae(d(T),F=>(r(),N(aa,{key:F.id,service:F,onTap:Se=>J(F),onRefresh:d(h)},null,8,["service","onTap","onRefresh"]))),128))])])):$("",!0),k.value==="alerts"?(r(),l("div",Io,[e("div",qo,[d(i).length===0?(r(),l("div",Bo,[D(d(xe),{class:"w-8 h-8 mx-auto mb-2",style:{color:"var(--monitoring-success)"}}),G[5]||(G[5]=e("p",{class:"text-sm",style:{color:"var(--text-color)"}},"All systems operational",-1))])):$("",!0),(r(!0),l(te,null,ae(U.value,F=>(r(),N(ha,{key:F.id,alert:F},null,8,["alert"]))),128))])])):$("",!0)]),_.value?(r(),N(Pa,{key:0,metric:_.value,onClose:G[1]||(G[1]=F=>_.value=null)},null,8,["metric"])):$("",!0),c.value?(r(),N(go,{key:1,service:c.value,onClose:G[2]||(G[2]=F=>c.value=null),onRefresh:d(h)},null,8,["service","onRefresh"])):$("",!0)],2))}}),zo=Q(Ho,[["__scopeId","data-v-98c6362e"]]),Vo={class:"p-8 text-center border-b-2",style:{background:"var(--section-bg)","border-color":"var(--primary-color)"}},jo={class:"header-content"},Fo={class:"flex items-center justify-center gap-2 mb-4 text-sm opacity-80"},Lo={class:"font-semibold",style:{color:"var(--primary-color)"}},Oo={class:"border-b border-opacity-20",style:{"border-color":"var(--primary-color)",background:"var(--card-bg)"}},No={class:"max-w-6xl mx-auto px-8"},Go={class:"flex space-x-8"},Wo=["onClick"],Ko={class:"p-8 max-w-6xl mx-auto"},Zo={key:0,class:"tab-content"},Xo={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Yo={class:"flex items-start gap-4 mb-4"},Qo={class:"flex-1"},Jo={class:"text-lg font-semibold mb-1",style:{color:"var(--text-color)"}},er={class:"text-sm opacity-80",style:{color:"var(--text-color)"}},tr={class:"text-right flex flex-col items-end gap-1"},sr={key:0,class:"text-xs opacity-70",style:{color:"var(--text-color)"}},ar={class:"text-right"},or=["onClick"],rr={key:1,class:"tab-content"},ir={class:"space-y-8"},nr={key:2,class:"tab-content md:hidden"},lr=Y({__name:"App",setup(s){const t=E("services"),a=E(!1);E("jehkoba8");const u=M(()=>{const h=[{id:"services",label:"Services",icon:Ae},{id:"monitoring",label:"System Monitoring",icon:Z}];return a.value&&h.push({id:"mobile",label:"Mobile Monitor",icon:We}),h}),k=()=>{a.value=window.innerWidth<768},_=()=>{k(),!a.value&&t.value==="mobile"&&(t.value="monitoring")},c=()=>{document.body.className=document.body.className.replace(/theme-\w+/g,""),document.body.classList.add("theme-jehkoba8")},x=()=>"theme-jehkoba8",S=E(null),C=E(new Date),A=E([{id:"proxmox",name:"Proxmox VE",description:"Virtualization Management",url:"https://192.168.0.99:8006",icon:Ae,status:"checking",healthEndpoint:"https://192.168.0.99:8006/api2/json/version"},{id:"plex",name:"Plex Media Server",description:"Media Streaming Platform",url:"http://192.168.0.99:32400",icon:$e,status:"checking",healthEndpoint:"http://192.168.0.99:32400/identity"},{id:"grafana",name:"Grafana Dashboard",description:"Metrics Visualization",url:"http://192.168.0.99:3000",icon:ge,status:"checking",healthEndpoint:"http://192.168.0.99:3000/api/health"},{id:"deluge",name:"Deluge Torrent Client",description:"Download Management",url:"http://192.168.0.111:8112",icon:ie,status:"checking",healthEndpoint:"http://192.168.0.111:8112/"},{id:"filebrowser",name:"File Browser",description:"File Management Interface",url:"http://192.168.0.99:8080",icon:_e,status:"checking",healthEndpoint:"http://192.168.0.99:8080/health"}]),m=async h=>{if(!h.healthEndpoint)return;const g=Date.now();h.status="checking";try{const f=new AbortController,w=setTimeout(()=>f.abort(),5e3),V=await fetch(h.healthEndpoint,{method:"GET",signal:f.signal,mode:"no-cors"});clearTimeout(w),h.responseTime=Date.now()-g,h.lastChecked=new Date,h.status="online"}catch(f){h.responseTime=Date.now()-g,h.lastChecked=new Date,h.status="offline",console.warn(`Health check failed for ${h.name}:`,f)}},o=async()=>{C.value=new Date;const h=A.value.map(g=>m(g));await Promise.allSettled(h)},b=()=>{o(),S.value=window.setInterval(o,3e4)},T=()=>{S.value&&(clearInterval(S.value),S.value=null)},R=h=>{window.open(h,"_blank")},y=h=>{switch(h){case"online":return"âœ…";case"offline":return"âŒ";case"checking":return"ðŸ”„";default:return"â“"}},v=h=>{switch(h){case"online":return"Online";case"offline":return"Offline";case"checking":return"Checking...";default:return"Unknown"}},i=h=>{switch(h){case"online":return"mario-tag-success";case"offline":return"mario-tag-danger";case"checking":return"mario-tag-warning";default:return"mario-tag"}};return ve(()=>{c(),b(),k(),window.addEventListener("resize",_),!a.value&&window.innerWidth>=1024&&(t.value="monitoring")}),ne(()=>{T(),window.removeEventListener("resize",_)}),(h,g)=>(r(),l("div",{id:"app",class:B(["min-h-screen",x()])},[e("header",Vo,[e("div",jo,[g[1]||(g[1]=e("h1",{class:"text-4xl mb-2",style:{color:"var(--text-color)"}},"ðŸ  Proxmox Homelab Dashboard",-1)),g[2]||(g[2]=e("p",{class:"text-xl mb-8 opacity-80",style:{color:"var(--text-color)"}},"Proxmox Services & System Monitoring",-1)),e("div",Fo,[g[0]||(g[0]=e("span",{style:{color:"var(--text-color)"}},"Last Health Check:",-1)),e("span",Lo,n(C.value.toLocaleTimeString()),1)]),g[3]||(g[3]=e("div",{class:"flex items-center justify-center gap-2 opacity-70"},[e("span",{class:"text-sm",style:{color:"var(--text-color)"}},"Professional Homelab Dashboard")],-1))])]),e("nav",Oo,[e("div",No,[e("div",Go,[(r(!0),l(te,null,ae(u.value,f=>(r(),l("button",{key:f.id,onClick:w=>t.value=f.id,class:B(["nav-tab",{active:t.value===f.id}])},[(r(),N(X(f.icon),{class:"w-4 h-4 mr-2"})),W(" "+n(f.label),1)],10,Wo))),128))])])]),e("main",Ko,[t.value==="services"?(r(),l("div",Zo,[e("div",Xo,[(r(!0),l(te,null,ae(A.value,f=>(r(),l("div",{key:f.id,class:"mario-card"},[e("div",Yo,[(r(),N(X(f.icon),{class:"w-8 h-8 flex-shrink-0",style:{color:"var(--primary-color)"}})),e("div",Qo,[e("h3",Jo,n(f.name),1),e("p",er,n(f.description),1)]),e("div",tr,[e("span",{class:B(i(f.status))},n(y(f.status))+" "+n(v(f.status)),3),f.responseTime?(r(),l("div",sr,n(f.responseTime)+"ms ",1)):$("",!0)])]),e("div",ar,[e("button",{onClick:w=>R(f.url),class:"mario-button inline-flex items-center gap-2"},[D(d(we),{class:"w-4 h-4"}),g[4]||(g[4]=W(" Access ",-1))],8,or)])]))),128))])])):$("",!0),t.value==="monitoring"?(r(),l("div",rr,[e("div",ir,[D(It),D(Cs)])])):$("",!0),t.value==="mobile"?(r(),l("div",nr,[D(zo)])):$("",!0)])],2))}}),cr=Q(lr,[["__scopeId","data-v-d8bcffdc"]]),ur=Be(cr);ur.mount("#app");
