import{S as F,F as H,D as R,T as O,P as V,a as U,A as j,b as K,c as W,_ as q,u as J,C as Q}from"./useServiceMonitoring-Ces9i3mo.js";import{l as E,G as l,C as L,i as X,v as Y,A as Z,N as ee,w as se,r as I,t as _,E as k,y as te,p as re,B as ae,f as oe,n as ie}from"./dark-7OLxMrVM.js";import{d as P,r as z,c as h,k as w,e as i,u as s,i as ne,x as le,w as r,j as t,s as n,t as c,b as f,g as v,F as G,f as d,q as ce,o as de,v as ue,h as ve}from"./index-Dedm_Ch6.js";const fe={class:"service-header"},me={class:"service-info"},pe={class:"service-text"},he={class:"service-title"},ge={class:"service-description"},_e={key:0,class:"metrics-section"},we={key:0,class:"metric-row"},ye={key:1,class:"metric-row"},Ce={key:0,class:"metric-row"},ke={key:1,class:"metric-row"},Se={key:2,class:"last-checked"},Me=P({__name:"ServiceCard",props:{service:{},elevation:{default:"medium"},borderStyle:{default:"solid"},glowEffect:{type:Boolean,default:!1},compactMode:{type:Boolean,default:!1}},emits:["open","refresh"],setup(A,{emit:y}){const u=A,S=y,g=z(!1),p={prometheus:U,"node-exporter":F,cadvisor:j,"zfs-exporter":U,"qbittorrent-exporter":R,plex:V,grafana:O,qbittorrent:R,filebrowser:H,proxmox:F},M=h(()=>p[u.service.id]||K),b=h(()=>["node-exporter","zfs-exporter","cadvisor","prometheus"].includes(u.service.id)),$=h(()=>{switch(u.service.status){case"online":return"success";case"offline":return"error";case"checking":return"info";case"warning":return"warning";case"unknown":default:return"default"}}),N=h(()=>{switch(u.service.status){case"online":return"●";case"offline":return"○";case"checking":return"◐";case"warning":return"▲";case"error":return"■";case"unknown":default:return"?"}}),T=h(()=>{const e=["service-card"];return u.elevation==="high"&&e.push("service-card--high-elevation"),u.compactMode&&e.push("service-card--compact"),g.value&&e.push("service-card--hover"),e.join(" ")}),D=e=>{S("open",e)},C=e=>{const a=Math.floor(e/86400),o=Math.floor(e%86400/3600),m=Math.floor(e%3600/60);return a>0?`${a}d ${o}h`:o>0?`${o}h ${m}m`:`${m}m`},x=e=>{if(e===0)return"0 B";const a=1024,o=["B","KB","MB","GB"],m=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,m)).toFixed(1))+" "+o[m]},B=e=>{const o=Date.now()-e.getTime();return o<6e4?`${Math.floor(o/1e3)}s ago`:o<36e5?`${Math.floor(o/6e4)}m ago`:`${Math.floor(o/36e5)}h ago`};return(e,a)=>(i(),w(s(E),{bordered:!0,hoverable:!0,class:ne(T.value),onMouseenter:a[1]||(a[1]=o=>g.value=!0),onMouseleave:a[2]||(a[2]=o=>g.value=!1)},le({header:r(()=>[d("div",fe,[d("div",me,[(i(),w(ce(M.value),{class:"service-icon"})),d("div",pe,[d("h4",he,c(e.service.name),1),d("p",ge,c(e.service.description),1)])]),t(s(X),{value:N.value,type:$.value,processing:e.service.status==="checking"},null,8,["value","type","processing"])])]),default:r(()=>[e.service.metrics||e.service.responseTime?(i(),f("div",_e,[t(s(L),{vertical:"",size:"small"},{default:r(()=>{var o,m;return[(o=e.service.metrics)!=null&&o.uptime?(i(),f("div",we,[t(s(l),{depth:"3",class:"metric-label"},{default:r(()=>[...a[3]||(a[3]=[n("Uptime",-1)])]),_:1}),t(s(l),{strong:"",class:"metric-value"},{default:r(()=>[n(c(C(e.service.metrics.uptime)),1)]),_:1})])):v("",!0),e.service.responseTime?(i(),f("div",ye,[t(s(l),{depth:"3",class:"metric-label"},{default:r(()=>[...a[4]||(a[4]=[n("Response Time",-1)])]),_:1}),t(s(l),{strong:"",class:"metric-value"},{default:r(()=>[n(c(e.service.responseTime)+"ms",1)]),_:1})])):v("",!0),e.service.id==="qbittorrent-exporter"&&((m=e.service.metrics)!=null&&m.customMetrics)?(i(),f(G,{key:2},[e.service.metrics.customMetrics.activeDownloads!==void 0?(i(),f("div",Ce,[t(s(l),{depth:"3",class:"metric-label"},{default:r(()=>[...a[5]||(a[5]=[n("Active Downloads",-1)])]),_:1}),t(s(l),{strong:"",class:"metric-value"},{default:r(()=>[n(c(e.service.metrics.customMetrics.activeDownloads),1)]),_:1})])):v("",!0),e.service.metrics.customMetrics.downloadSpeed?(i(),f("div",ke,[t(s(l),{depth:"3",class:"metric-label"},{default:r(()=>[...a[6]||(a[6]=[n("Download Speed",-1)])]),_:1}),t(s(l),{strong:"",class:"metric-value"},{default:r(()=>[n(c(x(e.service.metrics.customMetrics.downloadSpeed))+"/s",1)]),_:1})])):v("",!0)],64)):v("",!0)]}),_:1})])):v("",!0),b.value?(i(),w(W,{key:1,"service-id":e.service.id,"show-metrics":!0},null,8,["service-id"])):v("",!0),e.service.lastChecked?(i(),f("div",Se,[t(s(l),{depth:"3",size:"tiny"},{default:r(()=>[n(" Last checked "+c(B(e.service.lastChecked)),1)]),_:1})])):v("",!0)]),_:2},[e.service.url?{name:"footer",fn:r(()=>[t(s(L),{vertical:"",size:"tiny",class:"url-section"},{default:r(()=>[t(s(l),{depth:"3",class:"url-label"},{default:r(()=>[...a[7]||(a[7]=[n("Service URL",-1)])]),_:1}),t(s(l),{code:"",class:"url-text",onClick:a[0]||(a[0]=o=>D(e.service.url))},{default:r(()=>[n(c(e.service.url),1)]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["class"]))}}),be=q(Me,[["__scopeId","data-v-807718ea"]]),$e={class:"header-content"},Ne={class:"header-title"},Te={class:"title-text"},De={key:0,class:"header-calendar"},xe={class:"dashboard-container"},Be={class:"footer-content"},Le=P({__name:"NaiveApp",setup(A){const y=ue(),u=z(new Date().toLocaleTimeString()),S=z(new Date().toLocaleDateString()),{services:g,serviceMetrics:p,refreshService:M,refreshAllServices:b,startAutoRefresh:$,isRefreshing:N}=J(),T={common:{primaryColor:"#18a058",primaryColorHover:"#36ad6a",primaryColorPressed:"#0c7a43",infoColor:"#2080f0",infoColorHover:"#4098fc",infoColorPressed:"#1060c9",successColor:"#18a058",warningColor:"#f0a020",errorColor:"#d03050"},Card:{borderRadius:"8px",paddingMedium:"16px 20px"}},D=h(()=>{if(!p.value.lastUpdateTime)return"Never";const e=Date.now()-p.value.lastUpdateTime.getTime();return e<6e4?`${Math.floor(e/1e3)}s ago`:e<36e5?`${Math.floor(e/6e4)}m ago`:`${Math.floor(e/36e5)}h ago`}),C=()=>{u.value=new Date().toLocaleTimeString(),S.value=new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},x=async e=>{console.log(`Refreshing service: ${e}`),await M(e),C()},B=e=>{e.includes("192.168.0.111:8112")?window.open("http://192.168.0.111:8112/","_blank","noopener"):window.open(e,"_blank")};return de(()=>{setInterval(C,1e3),$()}),(e,a)=>(i(),w(s(ie),{theme:s(oe),"theme-overrides":T},{default:r(()=>[t(s(Y),{style:{"min-height":"100vh"}},{default:r(()=>[t(s(Z),{bordered:"",style:{height:"64px",padding:"0 24px"}},{default:r(()=>[d("div",$e,[d("div",Ne,[t(s(ee),{size:32,src:"/src/components/themes/retro/qca.png","fallback-src":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23666' d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z'/%3E%3C/svg%3E"}),d("h1",Te,c(s(y).title),1)]),s(y).features.calendarIntegration==="header"?(i(),f("div",De,[t(Q,{placement:"header","show-title":!1,compact:""})])):v("",!0)])]),_:1}),t(s(se),{style:{padding:"24px"}},{default:r(()=>[d("div",xe,[t(s(I),{cols:"1 s:1 m:2 l:3 xl:4",responsive:"screen","x-gap":24,"y-gap":24},{default:r(()=>[(i(!0),f(G,null,ve(s(g),o=>(i(),w(s(_),{key:o.id},{default:r(()=>[t(be,{service:o,elevation:"medium",onRefresh:x,onOpen:B},null,8,["service"])]),_:2},1024))),128))]),_:1}),t(s(E),{title:"System Overview",class:"metrics-card",style:{"margin-top":"24px"}},{default:r(()=>[t(s(I),{cols:"2 s:2 m:4",responsive:"screen","x-gap":16,"y-gap":16},{default:r(()=>[t(s(_),null,{default:r(()=>[t(s(k),{label:"Total Services",value:s(p).totalServices},null,8,["value"])]),_:1}),t(s(_),null,{default:r(()=>[t(s(k),{label:"Online",value:s(p).onlineServices},null,8,["value"])]),_:1}),t(s(_),null,{default:r(()=>[t(s(k),{label:"Health",value:`${s(p).healthyPercentage.toFixed(0)}%`},null,8,["value"])]),_:1}),t(s(_),null,{default:r(()=>[t(s(k),{label:"Last Check",value:D.value},null,8,["value"])]),_:1})]),_:1})]),_:1})])]),_:1}),t(s(te),{bordered:"",style:{height:"48px",padding:"0 24px"}},{default:r(()=>[d("div",Be,[t(s(L),null,{default:r(()=>[t(s(l),{depth:"3",style:{"font-size":"12px"}},{default:r(()=>[n(" Last updated: "+c(u.value),1)]),_:1}),t(s(re),{vertical:""}),t(s(ae),{quaternary:"",size:"tiny",onClick:s(b),loading:s(N)},{default:r(()=>[...a[0]||(a[0]=[n(" Refresh All ",-1)])]),_:1},8,["onClick","loading"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["theme"]))}}),Re=q(Le,[["__scopeId","data-v-3b2a58bd"]]);export{Re as default};
