import{d as z,h as r,v as q,U,a as p,f as F,o as m,g as t,n as l,t as n,F as L,s as N,i as P,c as d,R as W,b as V,l as A,m as E,q as Y}from"./index-Ct1RomOX.js";import{_ as j}from"./useServiceMonitoring-_JHDt3jp.js";const Z={key:0,class:"service-metrics"},G={key:0,class:"metrics-grid"},H={class:"metric-item"},K={class:"metric-bar"},O={class:"metric-value"},J={class:"metric-item"},Q={class:"metric-bar"},X={class:"metric-value"},ee={class:"metric-item"},te={class:"metric-value"},ae={key:1,class:"metrics-grid"},se={class:"metric-label"},re={class:"metric-bar"},oe={class:"metric-value"},ne={key:2,class:"metrics-grid"},le={class:"metric-item"},ie={class:"metric-value"},ce={class:"metric-item"},de={class:"metric-bar"},ue={class:"metric-value"},pe={class:"metric-item"},me={class:"metric-bar"},ve={class:"metric-value"},he={key:3,class:"metrics-grid"},fe={class:"metric-item"},ge={class:"metric-value"},ye={class:"metric-item"},xe={class:"metric-value"},_e={class:"metric-item"},be={class:"metric-value"},we=z({__name:"ServiceMetrics",props:{serviceId:{},showMetrics:{type:Boolean,default:!0}},setup(I){const u=I,g=r(0),s=r(0),b=r("0.0"),y=r([]),v=r(0),h=r(0),x=r(0);r(0),r(0),r(0);const S=r(0),i=r(0),M=r(0),k=r(0);let w=null;const f=(a,e)=>a>e?"#ff0000":a>e*.7?"#ffff00":"#00ff00",D=a=>{if(a===0)return"0 B";const e=1024,o=["B","KB","MB","GB"],_=Math.floor(Math.log(a)/Math.log(e));return parseFloat((a/Math.pow(e,_)).toFixed(1))+" "+o[_]},$=async()=>{try{const e=await(await fetch('http://192.168.0.99:9090/api/v1/query?query=100 - (avg(irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)')).json();e.status==="success"&&e.data.result.length>0&&(g.value=parseFloat(e.data.result[0].value[1]));const _=await(await fetch("http://192.168.0.99:9090/api/v1/query?query=(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100")).json();_.status==="success"&&_.data.result.length>0&&(s.value=parseFloat(_.data.result[0].value[1]));const R=await(await fetch("http://192.168.0.99:9090/api/v1/query?query=node_load1")).json();R.status==="success"&&R.data.result.length>0&&(b.value=parseFloat(R.data.result[0].value[1]).toFixed(1))}catch(a){console.warn("Failed to fetch node metrics:",a)}},T=async()=>{try{const e=await(await fetch("http://192.168.0.99:9090/api/v1/query?query=zfs_pool_capacity_percent")).json();e.status==="success"&&(y.value=e.data.result.map(o=>({name:o.metric.pool.replace("-pool",""),usage:parseFloat(o.value[1])})))}catch(a){console.warn("Failed to fetch ZFS metrics:",a)}},B=async()=>{try{const e=await(await fetch("http://192.168.0.99:9090/api/v1/query?query=count(container_last_seen)")).json();e.status==="success"&&e.data.result.length>0&&(v.value=parseInt(e.data.result[0].value[1])),h.value=Math.random()*30+10,x.value=Math.random()*40+20}catch(a){console.warn("Failed to fetch container metrics:",a)}},C=async()=>{try{const e=await(await fetch("http://192.168.0.99:9090/api/v1/targets")).json();e.status==="success"&&(i.value=e.data.activeTargets.length,S.value=e.data.activeTargets.filter(o=>o.health==="up").length),M.value=Math.floor(Math.random()*200)+400,k.value=Math.random()*1e8+5e7}catch(a){console.warn("Failed to fetch Prometheus metrics:",a)}},c=async()=>{switch(u.serviceId){case"node-exporter":await $();break;case"zfs-exporter":await T();break;case"cadvisor":await B();break;case"prometheus":await C();break}};return q(()=>{c(),w=setInterval(c,3e4)}),U(()=>{w&&clearInterval(w)}),(a,e)=>a.showMetrics?(m(),p("div",Z,[a.serviceId==="node-exporter"?(m(),p("div",G,[t("div",H,[e[0]||(e[0]=t("span",{class:"metric-label"},"CPU",-1)),t("div",K,[t("div",{class:"bar-fill",style:l({width:g.value+"%",backgroundColor:f(g.value,80)})},null,4)]),t("span",O,n(g.value.toFixed(1))+"%",1)]),t("div",J,[e[1]||(e[1]=t("span",{class:"metric-label"},"MEM",-1)),t("div",Q,[t("div",{class:"bar-fill",style:l({width:s.value+"%",backgroundColor:f(s.value,85)})},null,4)]),t("span",X,n(s.value.toFixed(1))+"%",1)]),t("div",ee,[e[2]||(e[2]=t("span",{class:"metric-label"},"LOAD",-1)),t("span",te,n(b.value),1)])])):a.serviceId==="zfs-exporter"?(m(),p("div",ae,[(m(!0),p(L,null,N(y.value,o=>(m(),p("div",{key:o.name,class:"metric-item"},[t("span",se,n(o.name),1),t("div",re,[t("div",{class:"bar-fill",style:l({width:o.usage+"%",backgroundColor:f(o.usage,90)})},null,4)]),t("span",oe,n(o.usage.toFixed(0))+"%",1)]))),128))])):a.serviceId==="cadvisor"?(m(),p("div",ne,[t("div",le,[e[3]||(e[3]=t("span",{class:"metric-label"},"Containers",-1)),t("span",ie,n(v.value),1)]),t("div",ce,[e[4]||(e[4]=t("span",{class:"metric-label"},"CPU",-1)),t("div",de,[t("div",{class:"bar-fill",style:l({width:h.value+"%",backgroundColor:f(h.value,70)})},null,4)]),t("span",ue,n(h.value.toFixed(1))+"%",1)]),t("div",pe,[e[5]||(e[5]=t("span",{class:"metric-label"},"MEM",-1)),t("div",me,[t("div",{class:"bar-fill",style:l({width:x.value+"%",backgroundColor:f(x.value,80)})},null,4)]),t("span",ve,n(x.value.toFixed(1))+"%",1)])])):a.serviceId==="prometheus"?(m(),p("div",he,[t("div",fe,[e[6]||(e[6]=t("span",{class:"metric-label"},"Targets",-1)),t("span",ge,n(S.value)+"/"+n(i.value),1)]),t("div",ye,[e[7]||(e[7]=t("span",{class:"metric-label"},"Scrapes",-1)),t("span",xe,n(M.value)+"/min",1)]),t("div",_e,[e[8]||(e[8]=t("span",{class:"metric-label"},"Storage",-1)),t("span",be,n(D(k.value)),1)])])):F("",!0)])):F("",!0)}}),Ie=j(we,[["__scopeId","data-v-18788812"]]),Se={class:"calendar-header"},Me=z({__name:"CalendarWidget",props:{placement:{},showTitle:{type:Boolean,default:!0},compact:{type:Boolean,default:!1}},setup(I){const u=I,g=P("fallTheme"),{theme:s}=g,b=r(""),y=r(new Date),v=r(!1);let h=null;const x=d(()=>y.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),S=d(()=>y.value.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})),i=d(()=>{const c=[s.value.primary.ramp1,s.value.primary.ramp2,s.value.primary.ramp3,s.value.primary.ramp4,s.value.primary.ramp5],a=new Date().getMonth()%c.length,e=c[a];return{border:e,text:s.value.text.bright,glow:e+"40",accent:s.value.primary.ramp4}}),M=d(()=>({background:"rgba(135, 93, 88, 0.1)",border:`4px solid ${i.value.border}`,borderRadius:"0px",padding:u.compact?"var(--space-md)":"var(--space-lg)",position:"relative",overflow:"hidden",cursor:"default",transition:"all var(--transition-normal)",backdropFilter:"blur(1px)",imageRendering:"pixelated",boxShadow:v.value?`
      0 8px 32px ${s.value.effects.shadow},
      0 0 20px ${i.value.glow},
      inset 3px 3px 0px ${s.value.text.primary}40,
      inset -3px -3px 0px ${s.value.effects.shadow},
      4px 4px 0px ${i.value.border}80
    `:`
      0 4px 12px ${s.value.effects.shadow},
      inset 2px 2px 0px ${s.value.text.primary}20,
      inset -2px -2px 0px ${s.value.effects.shadow},
      2px 2px 0px ${i.value.border}60
    `,transform:v.value?"translateY(-2px)":"translateY(0)",borderColor:v.value?i.value.border:i.value.border+"60"})),k=d(()=>({position:"absolute",top:"0",left:"0",right:"0",height:"2px",background:`linear-gradient(90deg, transparent, ${i.value.border}, transparent)`,opacity:v.value?"1":"0",transition:"opacity var(--transition-normal)"})),w=d(()=>({fontSize:u.placement==="header"?"0.9rem":"1.1rem",fontWeight:"600",color:s.value.text.bright,margin:u.placement==="header"?"0":"0 0 0.75rem 0",lineHeight:"1.25",textShadow:"1px 1px 0px rgba(0,0,0,0.5)"})),f=d(()=>({display:"flex",flexDirection:u.placement==="header"?"row":"column",gap:u.placement==="header"?"1rem":"0.5rem",alignItems:u.placement==="header"?"center":"flex-start"})),D=d(()=>({fontSize:u.placement==="header"?"1.1rem":"1.5rem",fontWeight:"700",color:i.value.accent,fontFamily:"'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace",letterSpacing:"0.05em",textShadow:"1px 1px 0px rgba(0,0,0,0.5)",filter:`drop-shadow(0 0 4px ${i.value.accent}40)`})),$=d(()=>({fontSize:u.placement==="header"?"0.8rem":"0.9rem",color:s.value.text.muted,opacity:"0.8",fontWeight:"500",textShadow:"1px 1px 0px rgba(0,0,0,0.5)"})),T=d(()=>({marginTop:"1rem",display:"flex",justifyContent:"center"})),B=d(()=>({fontSize:"0.8rem",padding:"0.5rem 1rem",textDecoration:"none",transition:"all var(--transition-normal)"})),C=()=>{const c=new Date;y.value=c,b.value=c.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})};return q(()=>{C(),h=setInterval(C,1e3)}),U(()=>{h&&clearInterval(h)}),(c,a)=>{const e=A("router-link");return m(),p("div",{class:W(["calendar-widget",`calendar-widget--${c.placement}`]),style:l(M.value),onMouseenter:a[0]||(a[0]=o=>v.value=!0),onMouseleave:a[1]||(a[1]=o=>v.value=!1)},[t("div",{style:l(k.value)},null,4),t("div",Se,[c.showTitle?(m(),p("h3",{key:0,class:"nes-text calendar-title",style:l(w.value)},n(x.value),5)):F("",!0)]),t("div",{class:"calendar-content",style:l(f.value)},[t("div",{class:"current-time nes-text",style:l(D.value)},n(b.value),5),t("div",{class:"current-date nes-text",style:l($.value)},n(S.value),5),c.placement==="card"?(m(),p("div",{key:0,class:"calendar-actions",style:l(T.value)},[V(e,{to:"/calendar",class:"nes-btn is-primary calendar-link",style:l(B.value)},{default:E(()=>[...a[2]||(a[2]=[Y(" ðŸ“… Manage Calendar & Tasks ",-1)])]),_:1},8,["style"])],4)):F("",!0)],4)],38)}}}),De=j(Me,[["__scopeId","data-v-c70dce30"]]);export{De as C,Ie as S};
