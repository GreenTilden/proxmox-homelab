import{_ as E}from"./qca-IRcFUp2s.js";import{S as H}from"./SeasonalThemeProvider-ewS_V3_x.js";import{u as W}from"./useTheme-g-avcNHO.js";import{d as q,r as n,c as t,l as J,w as S,h as Q,b as u,e,n as l,j as C,g as X,s as i,t as v,a as y,f as w}from"./index-Cb9bHEfA.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AtmosphericBackground-DbF0VqY1.js";import"./ScanlineOverlay-Dres_Fmy.js";const K={class:"file-manager-content"},Y={class:"tab-navigation"},Z={style:{margin:"1rem 0 0.5rem 0","font-size":"0.8rem",color:"var(--text-dim)"}},ee={class:"gotty-terminal-wrapper"},se=["src"],ae=["src"],te={class:"plex-actions"},re={class:"action-buttons"},oe={key:0,class:i(["nes-container","is-rounded","is-dark"]),style:{"margin-top":"1rem",padding:"1rem",width:"100%"}},ne={key:1,class:i(["nes-container","is-rounded","is-dark"]),style:{"margin-top":"1rem",padding:"1rem",width:"100%"}},le={key:2,class:i(["nes-container","is-rounded","is-dark"]),style:{"margin-top":"1rem",padding:"1rem",width:"100%"}},ie=["value"],P="192.168.0.250",ce="8083",de="8084",pe="/cmd-api/rescan-plex",ue="/cmd-api/refresh-cync",me="/cmd-api/upload-media",ge=q({__name:"FileManager",setup(ve){const h=n(!0),x=n(!0),m=n("downloads");W();const R=t(()=>`http://${P}:${ce}/`),D=t(()=>`http://${P}:${de}/`),c=n(null),d=n(null),r=n(null),p=n(-1),_=n(null),T=async()=>{c.value={type:"info",message:"Triggering Plex rescan..."};try{const a=await fetch(pe,{method:"POST",headers:{"Content-Type":"application/json"}}),s=await a.json();a.ok?c.value={type:"success",message:s.message||"Plex rescan initiated successfully!"}:c.value={type:"error",message:s.error||"Failed to trigger Plex rescan."}}catch{c.value={type:"error",message:"Network error or server unreachable."}}},U=async()=>{d.value={type:"info",message:"Refreshing Cync integration..."};try{const a=await fetch(ue,{method:"POST",headers:{"Content-Type":"application/json"}}),s=await a.json();a.ok?d.value={type:"success",message:s.message||"Cync integration refreshed!"}:d.value={type:"error",message:s.error||"Failed to refresh Cync integration."}}catch{d.value={type:"error",message:"Network error or server unreachable."}}},M=()=>{var a;(a=_.value)==null||a.click()},I=async a=>{var k;const s=a.target,f=(k=s.files)==null?void 0:k[0];if(!f)return;r.value={type:"info",message:`Uploading ${f.name}...`},p.value=0;const b=new FormData;b.append("file",f);try{const o=new XMLHttpRequest;o.open("POST",me),o.upload.onprogress=g=>{g.lengthComputable&&(p.value=Math.round(g.loaded/g.total*100))},o.onload=()=>{const g=JSON.parse(o.responseText);o.status===200?r.value={type:"success",message:g.message}:r.value={type:"error",message:g.error||"Upload failed."},p.value=-1},o.onerror=()=>{r.value={type:"error",message:"Network error or server unreachable."},p.value=-1},o.send(b)}catch{r.value={type:"error",message:"Upload failed."},p.value=-1}s.value=""},B=()=>{h.value=!h.value},F=()=>{x.value=!x.value},N=t(()=>({minHeight:"100vh",padding:"0",margin:"0",position:"relative"})),j=t(()=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-lg)",background:"var(--bg-surface)",borderBottom:"4px solid var(--color-primary-3)",borderImage:"repeating-linear-gradient(90deg, var(--color-primary-3) 0px, var(--color-primary-3) 8px, var(--color-primary-4) 8px, var(--color-primary-4) 16px) 4",backdropFilter:"blur(10px)",position:"sticky",top:"0",zIndex:"50",imageRendering:"pixelated"})),$=t(()=>({fontSize:"1.75rem",fontWeight:"700",color:"var(--text-bright)",margin:"0",textShadow:"2px 2px 4px var(--effect-shadow)",filter:"drop-shadow(0 0 8px var(--color-accent-3))",display:"flex",alignItems:"center",gap:"var(--space-sm)"})),L=t(()=>({width:"32px",height:"32px",borderRadius:"50%",imageRendering:"auto",filter:"drop-shadow(0 0 4px var(--color-accent-3))",flexShrink:"0"})),O=t(()=>({display:"flex",gap:"1rem"})),z=t(()=>({padding:"var(--space-lg)",maxWidth:"1200px",margin:"0 auto",display:"flex",flexDirection:"column",gap:"var(--space-xl)"})),A=t(()=>({})),V=t(()=>({display:"flex",justifyContent:"center",gap:"var(--space-md)",flexWrap:"wrap",padding:"var(--space-lg)",background:"var(--bg-card)",borderRadius:"var(--radius-lg)",border:"1px solid var(--color-primary-2)40"}));return(a,s)=>{const f=Q("router-link");return u(),J(H,{"enable-scanlines":h.value,"enable-particles":x.value,"enable-animations":!0},{default:S(()=>[e("div",{style:l(N.value)},[e("header",{style:l(j.value)},[e("h1",{class:"nes-text is-primary",style:l($.value)},[e("img",{src:E,alt:"QCA",style:l(L.value)},null,4),s[2]||(s[2]=C(" LCiBot Dashboard ",-1))],4),e("div",{style:l(O.value)},[X(f,{to:"/",class:"nes-btn is-primary"},{default:S(()=>[...s[3]||(s[3]=[C("ğŸ  Home",-1)])]),_:1})],4)],4),e("main",{style:l(z.value)},[e("div",{class:"nes-container with-title is-dark",style:l(A.value)},[s[4]||(s[4]=e("p",{class:"title"},"File Manager",-1)),e("div",K,[e("div",Y,[e("button",{onClick:s[0]||(s[0]=b=>m.value="downloads"),class:i(["nes-btn",m.value==="downloads"?"is-primary":""])}," ğŸ“¥ Downloads / Media ",2),e("button",{onClick:s[1]||(s[1]=b=>m.value="roms"),class:i(["nes-btn",m.value==="roms"?"is-warning":""])}," ğŸ® Batocera ROMs ",2)]),e("p",Z,v(m.value==="downloads"?"Left: Staging Downloads | Right: Media Pool":"Left: Staging Downloads | Right: Batocera ROMs"),1),e("div",ee,[m.value==="downloads"?(u(),y("iframe",{key:0,src:R.value,frameborder:"0",width:"100%",height:"600px",allowfullscreen:""},null,8,se)):(u(),y("iframe",{key:1,src:D.value,frameborder:"0",width:"100%",height:"600px",allowfullscreen:""},null,8,ae))]),e("div",te,[e("div",re,[e("button",{onClick:T,class:"nes-btn is-primary"},"Rescan Plex Libraries"),e("button",{onClick:U,class:"nes-btn is-warning"},"Refresh Cync Lights"),e("button",{onClick:M,class:"nes-btn is-success"},"ğŸ¬ Movie Upload"),e("input",{ref_key:"fileInput",ref:_,type:"file",style:{display:"none"},onChange:I},null,544)]),c.value?(u(),y("div",oe,[e("p",{class:i(c.value.type==="success"?"nes-text is-success":"nes-text is-error"),style:{margin:"0"}},v(c.value.message),3)])):w("",!0),d.value?(u(),y("div",ne,[e("p",{class:i(d.value.type==="success"?"nes-text is-success":"nes-text is-error"),style:{margin:"0"}},v(d.value.message),3)])):w("",!0),r.value?(u(),y("div",le,[e("p",{class:i(r.value.type==="success"?"nes-text is-success":r.value.type==="info"?"nes-text is-primary":"nes-text is-error"),style:{margin:"0"}},v(r.value.message),3),p.value>=0?(u(),y("progress",{key:0,class:"nes-progress is-success",value:p.value,max:"100",style:{"margin-top":"0.5rem"}},null,8,ie)):w("",!0)])):w("",!0)])])],4),e("div",{style:l(V.value)},[e("button",{class:"nes-btn is-warning",onClick:B},v(h.value?"ğŸ“º Disable":"ğŸ“º Enable")+" Scanlines ",1),e("button",{class:"nes-btn is-success",onClick:F},v(x.value?"â„ï¸ Disable":"â„ï¸ Enable")+" Particles ",1)],4)],4)],4)]),_:1},8,["enable-scanlines","enable-particles"])}}}),ke=G(ge,[["__scopeId","data-v-6c3404e2"]]);export{ke as default};
