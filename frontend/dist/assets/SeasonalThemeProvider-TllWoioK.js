import{P as H,u as T}from"./useTheme-BWdOx4En.js";import{d as $,r as k,c,o as F,b as N,e as p,h as S,j as z,n as h,F as V,q as G,f as u,g as U,t as L,p as X,k as Y,A as j,I as q}from"./index-CH5Kn3bK.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"atmospheric-background"},D={key:0,class:"particle-container"},Q=$({__name:"AtmosphericBackground",props:{particles:{},backgroundGradient:{},enableParticles:{type:Boolean,default:!0}},setup(d){const a=d,s=k([]),l=k(),n=k(),f=k(0),v=c(()=>({background:a.backgroundGradient,opacity:"0.8"})),b=c(()=>({background:`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23179c43' fill-opacity='${.05}'%3E%3Cpath d='M20 20c0-5 5-10 10-10s10 5 10 10-5 10-10 10-10-5-10-10zM0 20c0-5 5-10 10-10s10 5 10 10-5 10-10 10S0 25 0 20z'/%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"40px 40px"})),M=e=>{switch(e){case"leaf":return["/assets/seasons/autumn/leaf_1.png","/assets/seasons/autumn/leaf_2.png"];case"spooky":return["/assets/seasons/halloween/spooky_1.png","/assets/seasons/halloween/spooky_2.png"];case"snowflake":return["/assets/seasons/winter/snowflake_1.png","/assets/seasons/winter/snowflake_2.png"];case"petal":return["/assets/seasons/spring/petal_1.png","/assets/seasons/spring/petal_2.png"];default:return["/assets/seasons/autumn/leaf_1.png","/assets/seasons/autumn/leaf_2.png"]}},x=e=>e.includes("leaf_1")?1:e.includes("leaf_2")?.9:e.includes("spooky")?.7:e.includes("snowflake")?1.2:e.includes("petal")?.6:1,r=e=>e.includes("leaf_1")?360:e.includes("leaf_2")?270:e.includes("spooky")?180:e.includes("snowflake")?360:e.includes("petal")?180:360,B=e=>H[e]||0,A=e=>{const o=Math.random()*(a.particles.size.max-a.particles.size.min)+a.particles.size.min,t=a.particles.colors[Math.floor(Math.random()*a.particles.colors.length)],_=a.particles.physics.speed+(Math.random()-.5)*.2,w=M(a.particles.type),i=w[Math.floor(Math.random()*w.length)],O=x(i),P=r(i);let m=1,y=1,g=Math.random()*P;return i.includes("leaf_1")?(m=-1,y=1,g=45):i.includes("leaf_2")?(m=-1,y=-1,g=135):(m=1,y=1,g=0),{id:e,x:Math.random()*100,y:-10,size:o,color:t,speed:_*O,swayOffset:Math.random()*Math.PI*2,scaleX:m,scaleY:y,initialRotation:g,symbol:"",style:{position:"absolute",width:`${o}px`,height:`${o}px`,backgroundImage:`url(${i})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",color:t,filter:`hue-rotate(${B(t)}deg) brightness(0.95) saturate(0.7) drop-shadow(0 0 2px ${t}40)`,left:`${Math.random()*100}%`,top:"-10px",transform:`scaleX(${m}) scaleY(${y}) rotate(${g}deg)`,pointerEvents:"none",userSelect:"none",opacity:`${.5+Math.random()*.5}`,zIndex:"1",willChange:"transform","--random-delay":Math.random()*2,"--fall-delay":Math.random()*3,"--rotation-delay":Math.random()*4,"--flutter-delay":Math.random()*2},class:"particle-js-controlled"}},E=()=>{s.value=[],n.value&&clearInterval(n.value),f.value=a.particles.count,C()},C=()=>{n.value=setInterval(()=>{if(f.value>0&&s.value.length<a.particles.count){const o=A(s.value.length),t=window.innerHeight*.6;o.y=-Math.random()*t-50,o.style.top=`${o.y}px`,s.value.push(o),f.value--}else n.value&&(clearInterval(n.value),n.value=void 0)},200)},R=()=>{s.value.forEach(e=>{if(e.y+=e.speed,a.particles.physics.sway){e.swayOffset+=.02;const i=Math.sin(e.swayOffset)*a.particles.physics.wind*10;e.x+=i*.1}e.y>window.innerHeight+50&&(e.y=-10,e.x=Math.random()*100,e.swayOffset=Math.random()*Math.PI*2,e.initialRotation=Math.random()*360),e.x<-10&&(e.x=110),e.x>110&&(e.x=-10),e.style.left=`${e.x}%`,e.style.top=`${e.y}px`;const o=Math.sin(e.swayOffset*.3)*8,t=Math.sin(e.swayOffset*1.2)*3,_=1+Math.sin(e.swayOffset*.8)*.05,w=e.initialRotation+o+t;e.style.transform=`scaleX(${e.scaleX*_}) scaleY(${e.scaleY*_}) rotate(${w}deg)`}),l.value=requestAnimationFrame(R)};return F(()=>{a.enableParticles&&(E(),R())}),N(()=>{l.value&&cancelAnimationFrame(l.value),n.value&&clearInterval(n.value)}),(e,o)=>(u(),p("div",W,[S("div",{class:"background-gradient",style:h(v.value)},null,4),d.enableParticles?(u(),p("div",D,[(u(!0),p(V,null,G(s.value,t=>(u(),p("div",{key:t.id,class:U(["particle",t.class]),style:h(t.style)},L(t.symbol),7))),128))])):z("",!0),S("div",{class:"pattern-overlay",style:h(b.value)},null,4)]))}}),J=I(Q,[["__scopeId","data-v-4f6d4a37"]]),K=$({__name:"ScanlineOverlay",props:{opacity:{default:.08},color:{default:"#ffffff"},lineHeight:{default:8},enable:{type:Boolean,default:!0}},setup(d){const a=d,s=c(()=>a.enable?{background:`repeating-linear-gradient(
      0deg,
      transparent,
      transparent ${a.lineHeight-1}px,
      ${a.color} ${a.lineHeight-1}px,
      ${a.color} ${a.lineHeight}px
    )`,opacity:a.opacity.toString(),mixBlendMode:"overlay",animation:"scanline-flicker 3s ease-in-out infinite alternate"}:{display:"none"});return(l,n)=>(u(),p("div",{class:"scanline-overlay",style:h(s.value)},null,4))}}),Z=I(K,[["__scopeId","data-v-235cdad6"]]),ee={class:"theme-content"},ae=$({__name:"SeasonalThemeProvider",props:{enableScanlines:{type:Boolean,default:!0},enableParticles:{type:Boolean,default:!0},enableAnimations:{type:Boolean,default:!0}},setup(d){const{theme:a,currentSeason:s,cssVariables:l,createGradient:n}=T();q("fallTheme",{theme:a,currentSeason:s,cssVariables:l});const f=c(()=>({...l.value,minHeight:"100vh",background:v.value,color:"var(--text-primary)",fontFamily:"'Segoe UI', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif",transition:"all var(--transition-slow)"})),v=c(()=>{const r=[a.value.backgrounds.app,a.value.backgrounds.surface];return n("135deg",r,1)}),b=c(()=>({count:a.value.particles.count,type:M(s.value),colors:a.value.particles.colors,physics:a.value.particles.physics,size:a.value.particles.size})),M=r=>{switch(r){case"AUTUMN":return"leaf";case"HALLOWEEN":return"spooky";case"WINTER":return"snowflake";case"SPRING":return"petal";default:return"leaf"}},x=c(()=>a.value.effects.scanline);return(r,B)=>(u(),p("div",{class:"seasonal-theme-provider",style:h(f.value)},[X(J,{particles:b.value,"background-gradient":v.value},null,8,["particles","background-gradient"]),d.enableScanlines?(u(),Y(Z,{key:0,opacity:.08,color:x.value},null,8,["color"])):z("",!0),S("div",ee,[j(r.$slots,"default",{},void 0,!0)])],4))}}),le=I(ae,[["__scopeId","data-v-a8bfe554"]]);export{le as S};
