{
  "deluge_integration": {
    "panels": [
      {
        "type": "stat",
        "title": "Active Torrents",
        "gridPos": {"x": 0, "y": 8, "w": 4, "h": 4},
        "targets": ["deluge_active_torrents"],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "thresholds"},
            "thresholds": {
              "steps": [
                {"color": "#00CC44", "value": 0},
                {"color": "#FFAA00", "value": 5},
                {"color": "#FF0033", "value": 10}
              ]
            }
          }
        },
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "center",
          "orientation": "horizontal"
        }
      },
      {
        "type": "stat",
        "title": "Download Speed",
        "gridPos": {"x": 4, "y": 8, "w": 4, "h": 4},
        "targets": ["deluge_download_speed"],
        "fieldConfig": {
          "defaults": {
            "unit": "Bps",
            "color": {"mode": "palette-classic"},
            "thresholds": {
              "steps": [
                {"color": "#00CC44", "value": 0},
                {"color": "#0066FF", "value": 1000000},
                {"color": "#FF3366", "value": 10000000}
              ]
            }
          }
        },
        "options": {
          "colorMode": "value",
          "graphMode": "area"
        }
      },
      {
        "type": "stat",
        "title": "Upload Speed", 
        "gridPos": {"x": 8, "y": 8, "w": 4, "h": 4},
        "targets": ["deluge_upload_speed"],
        "fieldConfig": {
          "defaults": {
            "unit": "Bps",
            "color": {"mode": "palette-classic"},
            "thresholds": {
              "steps": [
                {"color": "#00CC44", "value": 0},
                {"color": "#0066FF", "value": 100000},
                {"color": "#FF3366", "value": 1000000}
              ]
            }
          }
        },
        "options": {
          "colorMode": "value",
          "graphMode": "line"
        }
      },
      {
        "type": "table",
        "title": "Torrent Queue",
        "gridPos": {"x": 0, "y": 12, "w": 24, "h": 8},
        "targets": ["deluge_torrent_list"],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "align": "left",
              "cellOptions": {"type": "auto"},
              "inspect": false
            },
            "mappings": [],
            "thresholds": {
              "steps": [
                {"color": "#0F0F1A", "value": null}
              ]
            }
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "Status"},
              "properties": [
                {
                  "id": "custom.cellOptions",
                  "value": {"type": "colored-background"}
                },
                {
                  "id": "mappings",
                  "value": [
                    {"options": {"Downloading": {"color": "#0066FF", "index": 0}}, "type": "value"},
                    {"options": {"Seeding": {"color": "#00CC44", "index": 1}}, "type": "value"},
                    {"options": {"Paused": {"color": "#FFAA00", "index": 2}}, "type": "value"},
                    {"options": {"Error": {"color": "#FF0033", "index": 3}}, "type": "value"}
                  ]
                }
              ]
            }
          ]
        },
        "options": {
          "showHeader": true,
          "cellHeight": "sm",
          "footer": {"show": false, "reducer": ["sum"], "countRows": false}
        }
      },
      {
        "type": "bargauge",
        "title": "Storage Usage",
        "gridPos": {"x": 12, "y": 8, "w": 12, "h": 4},
        "targets": ["staging_pool_usage", "media_pool_usage"],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "continuous-GrYlRd"},
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {"legend": false, "tooltip": false, "vis": false},
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {"type": "linear"},
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {"group": "A", "mode": "none"},
              "thresholdsStyle": {"mode": "off"}
            },
            "mappings": [],
            "thresholds": {
              "steps": [
                {"color": "#00CC44", "value": null},
                {"color": "#FFAA00", "value": 70},
                {"color": "#FF0033", "value": 90}
              ]
            },
            "unit": "percent"
          }
        },
        "options": {
          "displayMode": "lcd",
          "orientation": "horizontal",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "showUnfilled": true,
          "valueMode": "color"
        }
      }
    ]
  },
  "mobile_responsive": {
    "breakpoints": {
      "mobile": {"width": 768, "columns": 2},
      "tablet": {"width": 1024, "columns": 4}, 
      "desktop": {"width": 1920, "columns": 24}
    },
    "panel_adjustments": {
      "mobile": {
        "torrent_queue": {"gridPos": {"x": 0, "y": 16, "w": 2, "h": 12}},
        "stats": {"gridPos": {"w": 2, "h": 6}},
        "storage": {"gridPos": {"x": 0, "y": 22, "w": 2, "h": 8}}
      },
      "tablet": {
        "torrent_queue": {"gridPos": {"x": 0, "y": 12, "w": 4, "h": 10}},
        "stats": {"gridPos": {"w": 2, "h": 4}},
        "storage": {"gridPos": {"x": 0, "y": 16, "w": 4, "h": 6}}
      }
    }
  },
  "api_endpoints": {
    "deluge_host": "192.168.0.111:8112",
    "deluge_password": "deluge",
    "metrics": {
      "active_torrents": "/json",
      "download_speed": "/json", 
      "upload_speed": "/json",
      "torrent_list": "/json"
    }
  },
  "prometheus_queries": {
    "deluge_active_torrents": "deluge_session_num_torrents",
    "deluge_download_speed": "deluge_session_download_rate", 
    "deluge_upload_speed": "deluge_session_upload_rate",
    "staging_pool_usage": "100 * (zfs_dataset_used_bytes{dataset=\"staging-pool\"} / zfs_dataset_available_bytes{dataset=\"staging-pool\"})",
    "media_pool_usage": "100 * (zfs_dataset_used_bytes{dataset=\"media-pool\"} / zfs_dataset_available_bytes{dataset=\"media-pool\"})"
  }
}